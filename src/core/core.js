const a0_0x2ee0ba=a0_0x2925;(function(_0x56d8be,_0xf645fb){const _0x425bad=a0_0x2925,_0x34d9a4=_0x56d8be();while(!![]){try{const _0x45a050=parseInt(_0x425bad(0xab))/0x1*(-parseInt(_0x425bad(0xc9))/0x2)+-parseInt(_0x425bad(0xe3))/0x3+parseInt(_0x425bad(0xd5))/0x4+-parseInt(_0x425bad(0xb3))/0x5*(-parseInt(_0x425bad(0xc1))/0x6)+parseInt(_0x425bad(0x99))/0x7*(parseInt(_0x425bad(0xe6))/0x8)+parseInt(_0x425bad(0xed))/0x9*(-parseInt(_0x425bad(0xb5))/0xa)+-parseInt(_0x425bad(0xe8))/0xb;if(_0x45a050===_0xf645fb)break;else _0x34d9a4['push'](_0x34d9a4['shift']());}catch(_0x262fbb){_0x34d9a4['push'](_0x34d9a4['shift']());}}}(a0_0x5611,0x4dd0d));import{ethers}from'ethers';import a0_0x2fe398 from'../../setup.js';import{WCTC_ABI,ERC20_ABI,ROUTER_ABI,POSITION_ABI,FACTORY_ABI}from'../abi/abi.js';import{Helper}from'../utils/helper.js';function a0_0x2925(_0xb842c9,_0x47a1fb){const _0x5611ab=a0_0x5611();return a0_0x2925=function(_0x2925b4,_0x5f4dcd){_0x2925b4=_0x2925b4-0x91;let _0x3d881a=_0x5611ab[_0x2925b4];return _0x3d881a;},a0_0x2925(_0xb842c9,_0x47a1fb);}import a0_0x105775 from'../utils/twister.js';import a0_0x4a1a53 from'./service/deployManager.js';import a0_0xca203d from'./service/tokenManager.js';import a0_0xa190e4 from'./service/addLiquidityManager.js';import a0_0x211a38 from'./service/serviceManager.js';import a0_0x47cc80 from'./service/swapManager.js';function a0_0x5611(){const _0x2dc1d6=['gasPrice','Error\x20fetching\x20positions:','gwei','\x1b[0m\x20Into\x20','FACTORY','✔️\x20\x20Contract\x20deployed\x20successfully\x20at\x20\x1b[1m','Process\x20has\x20completed\x20successfully\x20for\x20address:\x20','reduce','swapToken','contracts','address','checkAllowance','42KTMkYO','swapManager','positions','\x20to\x20pool.','symbol','accounts','delay','walletInstance','liquidityPool0','🔨\x20Deploying\x20contract\x20\x1b[1m','getPositions','deployToken','MaxUint256','name','\x1b[0m','getAddress','supply','POSITION_MANAGER','125IybIuO','serviceManager','Approving\x20\x1b[1m','balanceOf','message','all','\x20CTC\x20into\x20WCTC','wrap','2319695MJkeuM','ZERO_ADDRESS','4994390LyfoTR','USDC_ADDRESS','🔨\x20\x20','provider','getBalance','sleep','Error\x20during\x20process\x20execution:','tokenManager','USDC','decimals','handleError','token','6gOTtax','deployTokenManager','Adding\x20100\x20','Contract','✔️\x20\x20Already\x20approved!','CONTRACT_ADDRESS','formatUnits','encodePriceSqrt','8104ZVvcSf','initializeContracts','WCTC','processApprove','addLiquidity','exit','deployPool','gasLimit','processWCTC','approveToken','balance','addLiquidityManager','2241636UqCyxi','\x20WCTC\x20into\x20CTC','❌\x20Failed\x20to\x20','Preparing\x20to\x20','\x20Into\x20','toFixed','Wrapping\x20','Failed\x20fetching\x20balance','0x0000000000000000000000000000000000000000','❌\x20No\x20fees\x20to\x20collect\x20for\x20positionId\x20','No\x20approval\x20needed\x20for\x20\x1b[1m','❌\x20Error:\x20','\x1b[0m\x20token.','toString','393228FKuUHg','runProcess','showSkelLogo','614864ylXtoi','collectFee','327228ZHIUnW','🔄\x20','performSwap','Deploying\x20Liquidity\x20Pool\x20Contract\x20for\x20','fetchTokenDetails','9UeaysF','Unwrapping\x20','parseUnits','log','deployContract','Preparing\x20to\x20deploy','\x1b[0m\x20Into\x20\x1b[1m','FIXED_GAS_LIMIT','\x20and\x20100\x20',')\x1b[0m','Accounts\x20are\x20required','validateAddress','WCTC_ADDRESS'];a0_0x5611=function(){return _0x2dc1d6;};return a0_0x5611();}export default class Core{constructor(_0x1b3d7d){const _0xc562bd=a0_0x2925;if(!_0x1b3d7d)throw new Error(_0xc562bd(0xf7));const {rpc:_0x2e85e5,gasSetting:_0x49b1fc,constant:_0x4dd6bb}=a0_0x2fe398;this[_0xc562bd(0xb8)]=new ethers['JsonRpcProvider'](_0x2e85e5['url']),this['accounts']=_0x1b3d7d,this[_0xc562bd(0xb4)]=_0xc562bd(0xdd),this[_0xc562bd(0xc6)]=_0x4dd6bb,this[_0xc562bd(0xa0)]=new ethers['Wallet'](_0x1b3d7d,this[_0xc562bd(0xb8)]),this[_0xc562bd(0x97)]=Helper[_0xc562bd(0xf8)](this[_0xc562bd(0xa0)][_0xc562bd(0x97)]),this[_0xc562bd(0xf4)]=_0x49b1fc[_0xc562bd(0xd0)],this['FIXED_GAS_PRICE']=ethers[_0xc562bd(0xef)](_0x49b1fc[_0xc562bd(0xfa)]['toString'](),_0xc562bd(0xfc)),this[_0xc562bd(0xac)]=new a0_0x211a38(this),this[_0xc562bd(0xc2)]=new a0_0x4a1a53(this),this['tokenManager']=new a0_0xca203d(this,this[_0xc562bd(0xac)]),this[_0xc562bd(0x9a)]=new a0_0x47cc80(this,this[_0xc562bd(0xac)]),this[_0xc562bd(0xd4)]=new a0_0xa190e4(this,this[_0xc562bd(0xac)]),this[_0xc562bd(0x96)]=this[_0xc562bd(0xca)](_0x4dd6bb);}[a0_0x2ee0ba(0xca)](_0x5e6b21){const _0x3aa302=a0_0x2ee0ba,{WCTC_ADDRESS:_0x4a8ff0,ROUTER_ADDRESS:_0x58cc96,USDC_ADDRESS:_0x4e2ced,FACTORY_ADDRESS:_0x5d7175,POSITION_MANAGER_ADDRESS:_0x5b7832}=_0x5e6b21,_0x30cbc4=[{'name':_0x3aa302(0xcb),'address':_0x4a8ff0,'abi':WCTC_ABI},{'name':'ROUTER','address':_0x58cc96,'abi':ROUTER_ABI},{'name':_0x3aa302(0xbd),'address':_0x4e2ced,'abi':ERC20_ABI},{'name':_0x3aa302(0x91),'address':_0x5d7175,'abi':FACTORY_ABI},{'name':_0x3aa302(0xaa),'address':_0x5b7832,'abi':POSITION_ABI}];return _0x30cbc4[_0x3aa302(0x94)]((_0x342887,{name:_0x541a0d,address:_0x49756a,abi:_0x1d085b})=>{const _0x18a09f=_0x3aa302;return _0x342887[_0x541a0d]=new ethers[(_0x18a09f(0xc4))](_0x49756a,_0x1d085b,this[_0x18a09f(0xa0)]),_0x342887;},{});}async[a0_0x2ee0ba(0xb9)](_0xeee1cf=![]){const _0xefe15c=a0_0x2ee0ba;try{const _0x1869ae=await this[_0xefe15c(0xb8)][_0xefe15c(0xb9)](this['address']);if(_0xeee1cf)this[_0xefe15c(0xd3)]=_0x1869ae['toString']();return ethers['formatEther'](_0x1869ae);}catch(_0x5f57a5){this['handleError'](_0xefe15c(0xdc),_0x5f57a5['message']);}}async[a0_0x2ee0ba(0xa4)](_0x255e60,_0x4f57b0,_0x42f7c9){const _0x713694=a0_0x2ee0ba,_0x2a39e3=_0x713694(0xa2)+_0x255e60+'\x20('+_0x4f57b0+_0x713694(0xf6);await Helper['delay'](0x1388,this[_0x713694(0x9e)],this,_0x2a39e3,_0x713694(0xf2));try{const _0x4da345=await this[_0x713694(0xc2)][_0x713694(0xf1)](_0x255e60,_0x4f57b0,_0x42f7c9);if(_0x4da345===this[_0x713694(0xb4)]){console[_0x713694(0xf0)](_0x4da345);throw new Error('Contract\x20address\x20is\x20zero\x20address');}return a0_0x105775[_0x713694(0xf0)](_0x2a39e3,this['accounts'],this,_0x713694(0x92)+_0x4da345),_0x4da345;}catch(_0x1f3dd3){this[_0x713694(0xbf)](_0x2a39e3,_0x1f3dd3[_0x713694(0xaf)]),process['exit'](0x1);}}async['processWCTC'](_0x34e2cd,_0x4d6028=![]){const _0xf0ee5=a0_0x2ee0ba,_0x2ed649=_0x4d6028===_0xf0ee5(0xb2);_0x34e2cd=_0x2ed649?_0x34e2cd:await this['contracts'][_0xf0ee5(0xcb)][_0xf0ee5(0xae)](this[_0xf0ee5(0x97)]);const _0x39f636=_0x2ed649?_0xf0ee5(0xdb)+Number(_0x34e2cd)[_0xf0ee5(0xda)](0x8)+_0xf0ee5(0xb1):_0xf0ee5(0xee)+Number(ethers[_0xf0ee5(0xc7)](_0x34e2cd[_0xf0ee5(0xe2)](),0x12))['toFixed'](0x8)+_0xf0ee5(0xd6);return await Helper[_0xf0ee5(0x9f)](0x1388,this[_0xf0ee5(0x9e)],this,_0xf0ee5(0xe9)+_0x39f636,_0xf0ee5(0xd8)+_0x39f636),await this[_0xf0ee5(0xbc)][_0xf0ee5(0xb2)](_0x34e2cd,_0x4d6028);}async[a0_0x2ee0ba(0xec)](_0x39a249){const _0x6cdc12=a0_0x2ee0ba,_0x5a138e=new ethers['Contract'](_0x39a249,ERC20_ABI,this[_0x6cdc12(0xa0)]),[_0x462b11,_0x3624b6,_0x4f0bb8]=await Promise['all']([_0x5a138e[_0x6cdc12(0x9d)](),_0x5a138e['name'](),_0x5a138e[_0x6cdc12(0xbe)]()]);return{'symbol':_0x462b11,'name':_0x3624b6,'decimal':_0x4f0bb8};}async[a0_0x2ee0ba(0xcc)](_0x15bfe6,_0x320e78){const _0x101370=a0_0x2ee0ba,{symbol:_0xd42e96,name:_0x4d4f14}=await this[_0x101370(0xec)](_0x15bfe6),_0x58c3ea=_0x101370(0xad)+_0xd42e96+_0x101370(0xfd)+_0x320e78;await Helper[_0x101370(0x9f)](0x1388,this[_0x101370(0x9e)],this,_0x101370(0xe9)+_0x58c3ea,'Preparing\x20to\x20approve\x20\x1b[1m'+_0xd42e96+_0x101370(0xa7));const _0x165cc7=await this[_0x101370(0xbc)][_0x101370(0x98)](_0x15bfe6,ethers[_0x101370(0xa8)](_0x320e78),this[_0x101370(0x97)]);if(_0x165cc7['toString']()===ethers[_0x101370(0xa5)][_0x101370(0xe2)]()){const _0xd0bbda=_0x101370(0xdf)+_0xd42e96+_0x101370(0xe1);return a0_0x105775[_0x101370(0xf0)](_0xd0bbda,this[_0x101370(0x9e)],this,_0x101370(0xc5));}return await this[_0x101370(0xb9)](!![]),this[_0x101370(0xbc)][_0x101370(0xd2)](_0x15bfe6,_0x320e78);}async[a0_0x2ee0ba(0xcf)](_0x4c7a2d,_0x455cb5,_0x107983,_0x25d505){const _0x4cb13d=a0_0x2ee0ba,[_0x131dd2,_0x2bebb2]=await Promise[_0x4cb13d(0xb0)]([this[_0x4cb13d(0xec)](_0x4c7a2d),this[_0x4cb13d(0xec)](_0x455cb5)]),_0x5b7f3b=_0x4cb13d(0xeb)+_0x131dd2[_0x4cb13d(0x9d)]+'/'+_0x2bebb2['symbol'];await Helper[_0x4cb13d(0x9f)](0x1388,this[_0x4cb13d(0x9e)],this,_0x4cb13d(0xb7)+_0x5b7f3b,'Preparing\x20to\x20'+_0x5b7f3b);const _0x3ecad4=await this[_0x4cb13d(0xd4)]['deployPool'](_0x4c7a2d,_0x455cb5,_0x107983,_0x25d505);if(_0x3ecad4===this[_0x4cb13d(0xb4)])return a0_0x105775[_0x4cb13d(0xf0)](_0x5b7f3b,this[_0x4cb13d(0x9e)],this,_0x4cb13d(0xd7)+_0x5b7f3b),process['exit'](0x1);return await this[_0x4cb13d(0xb9)](!![]),_0x3ecad4;}async[a0_0x2ee0ba(0xcd)](_0x2e3c0d,_0x19e9c7,_0x203156){const _0x2d3d50=a0_0x2ee0ba,[_0x2f153f,_0x5d7fd9]=await Promise[_0x2d3d50(0xb0)]([this[_0x2d3d50(0xec)](_0x2e3c0d),this[_0x2d3d50(0xec)](_0x19e9c7)]),_0x398ba0=_0x2d3d50(0xc3)+_0x2f153f[_0x2d3d50(0x9d)]+_0x2d3d50(0xf5)+_0x5d7fd9['symbol']+_0x2d3d50(0x9c);return await Helper[_0x2d3d50(0x9f)](0x1388,this[_0x2d3d50(0x9e)],this,_0x2d3d50(0xb7)+_0x398ba0,_0x2d3d50(0xd8)+_0x398ba0),await this[_0x2d3d50(0xb9)](!![]),await this[_0x2d3d50(0xd4)]['addLiquidity'](_0x2e3c0d,_0x19e9c7,_0x203156);}async['performSwap'](_0x20f704,_0x4be3f1,_0x3ba40e,_0x5b86c1,_0xe5ecb1){const _0x2de4e5=a0_0x2ee0ba,[_0x5eccca,_0x52d59f]=await Promise[_0x2de4e5(0xb0)]([this['fetchTokenDetails'](_0x4be3f1),this['fetchTokenDetails'](_0x3ba40e)]),_0x1355da='Swaping\x20\x1b[1m'+_0x5eccca[_0x2de4e5(0x9d)]+_0x2de4e5(0xf3)+_0x52d59f[_0x2de4e5(0x9d)]+_0x2de4e5(0xa7);return await Helper[_0x2de4e5(0x9f)](0x1388,this[_0x2de4e5(0x9e)],this,'🔄\x20'+_0x1355da,'Preparing\x20to\x20swap\x20'+_0x5eccca['symbol']+_0x2de4e5(0xd9)+_0x52d59f[_0x2de4e5(0x9d)]),await this['getBalance'](!![]),await this[_0x2de4e5(0x9a)][_0x2de4e5(0x95)](_0x4be3f1,_0x3ba40e,_0x20f704,_0x5b86c1,_0xe5ecb1);}async[a0_0x2ee0ba(0xa3)](){const _0x32a45c=a0_0x2ee0ba,{POSITION_MANAGER:_0x262ea8}=this[_0x32a45c(0x96)];try{const _0x243e20=await _0x262ea8[_0x32a45c(0xae)](this[_0x32a45c(0x97)]);for(let _0x1f233f=0x0;_0x1f233f<_0x243e20;_0x1f233f++){const _0x5a1de1=await _0x262ea8['tokenOfOwnerByIndex'](this['address'],_0x1f233f),{feeGrowthInside0LastX128:_0x164fc5,feeGrowthInside1LastX128:_0x14df9c}=await _0x262ea8[_0x32a45c(0x9b)](_0x5a1de1),_0x4a8cfb='Collecting\x20fee\x20for\x20positionId\x20'+_0x5a1de1[_0x32a45c(0xe2)]();_0x14df9c>BigInt(0x0)||_0x164fc5>BigInt(0x0)?(await Helper[_0x32a45c(0x9f)](0x1388,this[_0x32a45c(0x9e)],this,_0x4a8cfb,_0x32a45c(0xd8)+_0x4a8cfb),await this[_0x32a45c(0xd4)][_0x32a45c(0xe7)](_0x5a1de1)):a0_0x105775[_0x32a45c(0xf0)](_0x4a8cfb,this[_0x32a45c(0x9e)],this,_0x32a45c(0xde)+_0x5a1de1[_0x32a45c(0xe2)]());}}catch(_0x2a4e8a){this[_0x32a45c(0xbf)](_0x32a45c(0xfb),_0x2a4e8a['message']);}}async[a0_0x2ee0ba(0xe4)](){const _0x253f6f=a0_0x2ee0ba;try{Helper[_0x253f6f(0xe5)](),await this[_0x253f6f(0xba)](0xbb8);const _0x30f4c8=await this[_0x253f6f(0xa4)](a0_0x2fe398[_0x253f6f(0xc0)][_0x253f6f(0xa6)],a0_0x2fe398[_0x253f6f(0xc0)][_0x253f6f(0x9d)],a0_0x2fe398[_0x253f6f(0xc0)][_0x253f6f(0xa9)]);await this[_0x253f6f(0xba)](0xbb8),await this[_0x253f6f(0xd1)](a0_0x2fe398[_0x253f6f(0xa1)][_0x253f6f(0xe2)](),_0x253f6f(0xb2)),await this['sleep'](0xbb8);const _0x31daa5=[[this['CONTRACT_ADDRESS']['WCTC_ADDRESS'],this[_0x253f6f(0xc6)]['POSITION_MANAGER_ADDRESS']],[_0x30f4c8,this[_0x253f6f(0xc6)]['POSITION_MANAGER_ADDRESS']]];for(const _0x19c9bd of _0x31daa5)await this[_0x253f6f(0xcc)](..._0x19c9bd);await this[_0x253f6f(0xba)](0xbb8),await this[_0x253f6f(0xcf)](this[_0x253f6f(0xc6)][_0x253f6f(0xf9)],_0x30f4c8,0xbb8,this['addLiquidityManager'][_0x253f6f(0xc8)](0x1,0x1)),await this[_0x253f6f(0xba)](0xbb8),await this['addLiquidityManager'][_0x253f6f(0xcd)](this[_0x253f6f(0xc6)][_0x253f6f(0xf9)],_0x30f4c8,0xbb8),await this['sleep'](0xbb8);const _0x51d519=[['10',this[_0x253f6f(0xc6)][_0x253f6f(0xf9)],this[_0x253f6f(0xc6)][_0x253f6f(0xb6)],0x1f4,![]],['0',this[_0x253f6f(0xc6)]['USDC_ADDRESS'],this[_0x253f6f(0xc6)][_0x253f6f(0xf9)],0x1f4,!![]],['10',this['CONTRACT_ADDRESS'][_0x253f6f(0xf9)],_0x30f4c8,0xbb8,![]]];for(const _0x42da46 of _0x51d519){await this[_0x253f6f(0xea)](..._0x42da46),await this['sleep'](0xbb8);}await this['processWCTC']('0',![]),await this[_0x253f6f(0xba)](0xbb8),await this[_0x253f6f(0xa3)](),await this['getBalance'](!![]),a0_0x105775['log'](_0x253f6f(0x93)+this[_0x253f6f(0x97)],this['accounts'],this,'✔️\x20\x20All\x20process\x20has\x20been\x20completed.');}catch(_0x1606e0){this['handleError'](_0x253f6f(0xbb),_0x1606e0[_0x253f6f(0xaf)]),process[_0x253f6f(0xce)](0x1);}}async[a0_0x2ee0ba(0xbf)](_0xcb9ab0,_0x301d68){const _0x4d7392=a0_0x2ee0ba;a0_0x105775[_0x4d7392(0xf0)](_0xcb9ab0,this['accounts'],this,_0x4d7392(0xe0)+_0x301d68),await this[_0x4d7392(0xba)](0xdac);}[a0_0x2ee0ba(0xba)](_0x31d7aa){return new Promise(_0xf27556=>setTimeout(_0xf27556,_0x31d7aa));}}