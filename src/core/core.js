const a0_0x4e320f=a0_0x3cfe;function a0_0x3cfe(_0x57179f,_0x197e93){const _0x1a9fce=a0_0x1a9f();return a0_0x3cfe=function(_0x3cfe0f,_0x59ac3a){_0x3cfe0f=_0x3cfe0f-0x134;let _0x10e08d=_0x1a9fce[_0x3cfe0f];return _0x10e08d;},a0_0x3cfe(_0x57179f,_0x197e93);}(function(_0x452f52,_0x4750d4){const _0x4f8314=a0_0x3cfe,_0xae31b8=_0x452f52();while(!![]){try{const _0x32b8d6=parseInt(_0x4f8314(0x156))/0x1+-parseInt(_0x4f8314(0x183))/0x2*(-parseInt(_0x4f8314(0x139))/0x3)+-parseInt(_0x4f8314(0x16b))/0x4*(parseInt(_0x4f8314(0x189))/0x5)+parseInt(_0x4f8314(0x160))/0x6+parseInt(_0x4f8314(0x14b))/0x7+parseInt(_0x4f8314(0x157))/0x8*(parseInt(_0x4f8314(0x163))/0x9)+-parseInt(_0x4f8314(0x17f))/0xa;if(_0x32b8d6===_0x4750d4)break;else _0xae31b8['push'](_0xae31b8['shift']());}catch(_0x1bcf18){_0xae31b8['push'](_0xae31b8['shift']());}}}(a0_0x1a9f,0xbb5d0));import{ethers}from'ethers';import a0_0x52ab4c from'../../setup.js';import{WCTC_ABI,ERC20_ABI,ROUTER_ABI,POSITION_ABI,FACTORY_ABI}from'../abi/abi.js';import{Helper}from'../utils/helper.js';import a0_0x9d9a88 from'../utils/twister.js';import a0_0xe260f9 from'./service/deployManager.js';import a0_0x41eeed from'./service/tokenManager.js';import a0_0x23477d from'./service/addLiquidityManager.js';function a0_0x1a9f(){const _0x2eaa02=['\x1b[0m\x20Into\x20','13135BbVzlp','toString','validateAddress','üîÑ\x20','Preparing\x20to\x20swap\x20','Contract','\x1b[0m','fetchTokenDetails','FIXED_GAS_LIMIT','addLiquidity','ZERO_ADDRESS','USDC_ADDRESS','Swaping\x20\x1b[1m','symbol','provider','toFixed','approveToken','log','WCTC_ADDRESS','initializeContracts','194637qeIPcI','checkAllowance','tokenManager','sleep','Error\x20fetching\x20positions:','gasLimit','Wrapping\x20','Process\x20has\x20completed\x20successfully\x20for\x20address:\x20','0x0000000000000000000000000000000000000000','balanceOf','performSwap','\x20to\x20pool.','processWCTC','gwei','No\x20approval\x20needed\x20for\x20\x1b[1m','decimals','exit','delay','9444421rCSLpT','Preparing\x20to\x20deploy','deployToken','walletInstance','reduce','contracts','getAddress','üî®\x20Deploying\x20contract\x20\x1b[1m','encodePriceSqrt','swapManager','runProcess','400210GwQBgb','8IzLBVm','Contract\x20address\x20is\x20zero\x20address','getBalance','Accounts\x20are\x20required','deployContract','JsonRpcProvider','serviceManager','‚ùå\x20Failed\x20to\x20','Wallet','5173782vmxSEE','Preparing\x20to\x20','message','7726941YFRXWu','POSITION_MANAGER','WCTC','deployPool','Failed\x20fetching\x20balance','MaxUint256','all','handleError','412uDjViS','‚ùå\x20Error:\x20','deployTokenManager','processApprove','name','url','‚úîÔ∏è\x20\x20All\x20process\x20has\x20been\x20completed.','accounts','CONTRACT_ADDRESS','formatUnits','token','üî®\x20\x20','Approving\x20\x1b[1m','supply','POSITION_MANAGER_ADDRESS','addLiquidityManager','\x20Into\x20','getPositions','Preparing\x20to\x20approve\x20\x1b[1m','tokenOfOwnerByIndex','32756650dsCmCC','wrap','parseUnits','address','26ayezHT','Deploying\x20Liquidity\x20Pool\x20Contract\x20for\x20','‚úîÔ∏è\x20\x20Already\x20approved!','liquidityPool0','collectFee'];a0_0x1a9f=function(){return _0x2eaa02;};return a0_0x1a9f();}import a0_0x8a9c88 from'./service/serviceManager.js';import a0_0x342343 from'./service/swapManager.js';export default class Core{constructor(_0x290b6a){const _0x1294e0=a0_0x3cfe;if(!_0x290b6a)throw new Error(_0x1294e0(0x15a));const {rpc:_0x334480,gasSetting:_0x1804bb,constant:_0x234138}=a0_0x52ab4c;this[_0x1294e0(0x197)]=new ethers[(_0x1294e0(0x15c))](_0x334480[_0x1294e0(0x170)]),this[_0x1294e0(0x172)]=_0x290b6a,this['ZERO_ADDRESS']=_0x1294e0(0x141),this[_0x1294e0(0x173)]=_0x234138,this[_0x1294e0(0x14e)]=new ethers[(_0x1294e0(0x15f))](_0x290b6a,this[_0x1294e0(0x197)]),this[_0x1294e0(0x182)]=Helper[_0x1294e0(0x18b)](this[_0x1294e0(0x14e)][_0x1294e0(0x182)]),this[_0x1294e0(0x191)]=_0x1804bb[_0x1294e0(0x13e)],this['FIXED_GAS_PRICE']=ethers[_0x1294e0(0x181)](_0x1804bb['gasPrice'][_0x1294e0(0x18a)](),_0x1294e0(0x146)),this['serviceManager']=new a0_0x8a9c88(this),this['deployTokenManager']=new a0_0xe260f9(this),this[_0x1294e0(0x13b)]=new a0_0x41eeed(this,this[_0x1294e0(0x15d)]),this[_0x1294e0(0x154)]=new a0_0x342343(this,this[_0x1294e0(0x15d)]),this[_0x1294e0(0x17a)]=new a0_0x23477d(this,this[_0x1294e0(0x15d)]),this[_0x1294e0(0x150)]=this['initializeContracts'](_0x234138);}[a0_0x4e320f(0x138)](_0x3ff80c){const _0x41e00e=a0_0x4e320f,{WCTC_ADDRESS:_0x314aef,ROUTER_ADDRESS:_0x350c90,USDC_ADDRESS:_0x2b0188,FACTORY_ADDRESS:_0x53456a,POSITION_MANAGER_ADDRESS:_0x5ae000}=_0x3ff80c,_0x345af6=[{'name':_0x41e00e(0x165),'address':_0x314aef,'abi':WCTC_ABI},{'name':'ROUTER','address':_0x350c90,'abi':ROUTER_ABI},{'name':'USDC','address':_0x2b0188,'abi':ERC20_ABI},{'name':'FACTORY','address':_0x53456a,'abi':FACTORY_ABI},{'name':_0x41e00e(0x164),'address':_0x5ae000,'abi':POSITION_ABI}];return _0x345af6[_0x41e00e(0x14f)]((_0x347dbe,{name:_0x3fdc3d,address:_0x5ae3e9,abi:_0x1260d7})=>{const _0x56c44e=_0x41e00e;return _0x347dbe[_0x3fdc3d]=new ethers[(_0x56c44e(0x18e))](_0x5ae3e9,_0x1260d7,this['walletInstance']),_0x347dbe;},{});}async[a0_0x4e320f(0x159)](_0x2938cf=![]){const _0xd8a043=a0_0x4e320f;try{const _0x427c01=await this[_0xd8a043(0x197)][_0xd8a043(0x159)](this[_0xd8a043(0x182)]);if(_0x2938cf)this['balance']=_0x427c01['toString']();return ethers['formatEther'](_0x427c01);}catch(_0x4ae677){this[_0xd8a043(0x16a)](_0xd8a043(0x167),_0x4ae677['message']);}}async[a0_0x4e320f(0x14d)](_0x182777,_0x33419e,_0x4b8672){const _0x33461b=a0_0x4e320f,_0x392fc7=_0x33461b(0x152)+_0x182777+'\x20('+_0x33419e+')\x1b[0m';await Helper[_0x33461b(0x14a)](0x1388,this[_0x33461b(0x172)],this,_0x392fc7,_0x33461b(0x14c));try{const _0x3615d5=await this[_0x33461b(0x16d)][_0x33461b(0x15b)](_0x182777,_0x33419e,_0x4b8672);if(_0x3615d5===this[_0x33461b(0x193)]){console['log'](_0x3615d5);throw new Error(_0x33461b(0x158));}return a0_0x9d9a88['log'](_0x392fc7,this[_0x33461b(0x172)],this,'‚úîÔ∏è\x20Contract\x20deployed\x20successfully\x20at\x20\x1b[1m'+_0x3615d5),_0x3615d5;}catch(_0x1a2e47){this[_0x33461b(0x16a)](_0x392fc7,_0x1a2e47[_0x33461b(0x162)]),process['exit'](0x1);}}async[a0_0x4e320f(0x145)](_0x42b7c5,_0x1cbb3a=![]){const _0x37bf7d=a0_0x4e320f,_0xfefa44=_0x1cbb3a==='wrap';_0x42b7c5=_0xfefa44?_0x42b7c5:await this[_0x37bf7d(0x150)]['WCTC']['balanceOf'](this[_0x37bf7d(0x182)]);const _0xc98139=_0xfefa44?_0x37bf7d(0x13f)+Number(_0x42b7c5)[_0x37bf7d(0x134)](0x8)+'\x20CTC\x20into\x20WCTC':'Unwrapping\x20'+Number(ethers[_0x37bf7d(0x174)](_0x42b7c5[_0x37bf7d(0x18a)](),0x12))[_0x37bf7d(0x134)](0x8)+'\x20WCTC\x20into\x20CTC';return await Helper[_0x37bf7d(0x14a)](0x1388,this[_0x37bf7d(0x172)],this,'üîÑ\x20'+_0xc98139,_0x37bf7d(0x161)+_0xc98139),await this['tokenManager'][_0x37bf7d(0x180)](_0x42b7c5,_0x1cbb3a);}async[a0_0x4e320f(0x190)](_0x27a4e1){const _0x68dc4a=a0_0x4e320f,_0x1f76e6=new ethers[(_0x68dc4a(0x18e))](_0x27a4e1,ERC20_ABI,this[_0x68dc4a(0x14e)]),[_0x1c2338,_0x240560,_0x429d4c]=await Promise[_0x68dc4a(0x169)]([_0x1f76e6[_0x68dc4a(0x196)](),_0x1f76e6[_0x68dc4a(0x16f)](),_0x1f76e6[_0x68dc4a(0x148)]()]);return{'symbol':_0x1c2338,'name':_0x240560,'decimal':_0x429d4c};}async[a0_0x4e320f(0x16e)](_0x481eba,_0x2a69fa){const _0x16cda5=a0_0x4e320f,{symbol:_0x10c85f,name:_0x24552c}=await this['fetchTokenDetails'](_0x481eba),_0x3db6ab=_0x16cda5(0x177)+_0x10c85f+_0x16cda5(0x188)+_0x2a69fa;await Helper[_0x16cda5(0x14a)](0x1388,this[_0x16cda5(0x172)],this,'üîÑ\x20'+_0x3db6ab,_0x16cda5(0x17d)+_0x10c85f+'\x1b[0m');const _0x35310f=await this[_0x16cda5(0x13b)][_0x16cda5(0x13a)](_0x481eba,ethers[_0x16cda5(0x151)](_0x2a69fa),this[_0x16cda5(0x182)]);if(_0x35310f[_0x16cda5(0x18a)]()===ethers[_0x16cda5(0x168)][_0x16cda5(0x18a)]()){const _0x54a4a9=_0x16cda5(0x147)+_0x10c85f+'\x1b[0m\x20token.';return a0_0x9d9a88[_0x16cda5(0x136)](_0x54a4a9,this['accounts'],this,_0x16cda5(0x185));}return await this[_0x16cda5(0x159)](!![]),this['tokenManager'][_0x16cda5(0x135)](_0x481eba,_0x2a69fa);}async[a0_0x4e320f(0x166)](_0x18d85f,_0x47b38a,_0x2bbdd7,_0x4baf17){const _0x5d6c94=a0_0x4e320f,[_0x55af5e,_0x352ac2]=await Promise[_0x5d6c94(0x169)]([this[_0x5d6c94(0x190)](_0x18d85f),this[_0x5d6c94(0x190)](_0x47b38a)]),_0x2c221e=_0x5d6c94(0x184)+_0x55af5e['symbol']+'/'+_0x352ac2[_0x5d6c94(0x196)];await Helper[_0x5d6c94(0x14a)](0x1388,this[_0x5d6c94(0x172)],this,_0x5d6c94(0x176)+_0x2c221e,_0x5d6c94(0x161)+_0x2c221e);const _0x178944=await this[_0x5d6c94(0x17a)]['deployPool'](_0x18d85f,_0x47b38a,_0x2bbdd7,_0x4baf17);if(_0x178944===this['ZERO_ADDRESS'])return a0_0x9d9a88[_0x5d6c94(0x136)](_0x2c221e,this[_0x5d6c94(0x172)],this,_0x5d6c94(0x15e)+_0x2c221e),process[_0x5d6c94(0x149)](0x1);return await this[_0x5d6c94(0x159)](!![]),_0x178944;}async[a0_0x4e320f(0x192)](_0x3757d0,_0x430696,_0x886b11){const _0x182eba=a0_0x4e320f,[_0x3b42ba,_0x3df917]=await Promise[_0x182eba(0x169)]([this['fetchTokenDetails'](_0x3757d0),this[_0x182eba(0x190)](_0x430696)]),_0x55a31a='Adding\x20100\x20'+_0x3b42ba['symbol']+'\x20and\x20100\x20'+_0x3df917['symbol']+_0x182eba(0x144);return await Helper['delay'](0x1388,this[_0x182eba(0x172)],this,_0x182eba(0x176)+_0x55a31a,_0x182eba(0x161)+_0x55a31a),await this['getBalance'](!![]),await this['addLiquidityManager']['addLiquidity'](_0x3757d0,_0x430696,_0x886b11);}async['performSwap'](_0x3c9c73,_0x2b9b5c,_0x56dcc9,_0xfbd4d9,_0x2a4b98){const _0x157ea9=a0_0x4e320f,[_0x1963b3,_0x1ac80e]=await Promise[_0x157ea9(0x169)]([this[_0x157ea9(0x190)](_0x2b9b5c),this[_0x157ea9(0x190)](_0x56dcc9)]),_0x2ccb02=_0x157ea9(0x195)+_0x1963b3['symbol']+'\x1b[0m\x20Into\x20\x1b[1m'+_0x1ac80e[_0x157ea9(0x196)]+_0x157ea9(0x18f);return await Helper[_0x157ea9(0x14a)](0x1388,this[_0x157ea9(0x172)],this,_0x157ea9(0x18c)+_0x2ccb02,_0x157ea9(0x18d)+_0x1963b3['symbol']+_0x157ea9(0x17b)+_0x1ac80e['symbol']),await this[_0x157ea9(0x159)](!![]),await this[_0x157ea9(0x154)]['swapToken'](_0x2b9b5c,_0x56dcc9,_0x3c9c73,_0xfbd4d9,_0x2a4b98);}async[a0_0x4e320f(0x17c)](){const _0x1f3844=a0_0x4e320f,{POSITION_MANAGER:_0x635ce8}=this['contracts'];try{const _0x36a7b2=await _0x635ce8[_0x1f3844(0x142)](this[_0x1f3844(0x182)]);for(let _0x39529b=0x0;_0x39529b<_0x36a7b2;_0x39529b++){const _0x534d5a=await _0x635ce8[_0x1f3844(0x17e)](this[_0x1f3844(0x182)],_0x39529b),{feeGrowthInside0LastX128:_0x2dcf63,feeGrowthInside1LastX128:_0x8daec3}=await _0x635ce8['positions'](_0x534d5a),_0x35f62e='Collecting\x20fee\x20for\x20positionId\x20'+_0x534d5a['toString']();_0x8daec3>BigInt(0x0)||_0x2dcf63>BigInt(0x0)?(await Helper[_0x1f3844(0x14a)](0x1388,this[_0x1f3844(0x172)],this,_0x35f62e,_0x1f3844(0x161)+_0x35f62e),await this['addLiquidityManager'][_0x1f3844(0x187)](_0x534d5a)):a0_0x9d9a88['log'](_0x35f62e,this['accounts'],this,'‚ùå\x20No\x20fees\x20to\x20collect\x20for\x20positionId\x20'+_0x534d5a[_0x1f3844(0x18a)]());}}catch(_0x315e4b){this['handleError'](_0x1f3844(0x13d),_0x315e4b['message']);}}async[a0_0x4e320f(0x155)](){const _0xda43fc=a0_0x4e320f;try{Helper['showSkelLogo']();const _0x5ca48d=await this[_0xda43fc(0x14d)](a0_0x52ab4c['token']['name'],a0_0x52ab4c[_0xda43fc(0x175)][_0xda43fc(0x196)],a0_0x52ab4c[_0xda43fc(0x175)][_0xda43fc(0x178)]);await this['processWCTC'](a0_0x52ab4c[_0xda43fc(0x186)][_0xda43fc(0x18a)](),_0xda43fc(0x180));const _0x29472f=[[this['CONTRACT_ADDRESS'][_0xda43fc(0x137)],this[_0xda43fc(0x173)][_0xda43fc(0x179)]],[_0x5ca48d,this[_0xda43fc(0x173)][_0xda43fc(0x179)]]];for(const [_0x2de778,_0x51b2ef]of _0x29472f){await this[_0xda43fc(0x16e)](_0x2de778,_0x51b2ef);}await this[_0xda43fc(0x13c)](0x3a98),await this[_0xda43fc(0x166)](this[_0xda43fc(0x173)][_0xda43fc(0x137)],_0x5ca48d,0xbb8,this[_0xda43fc(0x17a)][_0xda43fc(0x153)](0x1,0x1)),await this[_0xda43fc(0x17a)][_0xda43fc(0x192)](this[_0xda43fc(0x173)]['WCTC_ADDRESS'],_0x5ca48d,0xbb8);const _0x5ebb9c=[['10',this['CONTRACT_ADDRESS']['WCTC_ADDRESS'],this[_0xda43fc(0x173)][_0xda43fc(0x194)],0x1f4,![]],['0',this['CONTRACT_ADDRESS'][_0xda43fc(0x194)],this[_0xda43fc(0x173)][_0xda43fc(0x137)],0x1f4,!![]],['10',this[_0xda43fc(0x173)][_0xda43fc(0x137)],_0x5ca48d,0xbb8,![]]];for(const [_0x53dc5f,_0x168675,_0x2a9056,_0x2aeaee,_0x5c69fe]of _0x5ebb9c){await this[_0xda43fc(0x143)](_0x53dc5f,_0x168675,_0x2a9056,_0x2aeaee,_0x5c69fe);}await this['processWCTC']('0',![]),await this[_0xda43fc(0x17c)](),a0_0x9d9a88['log'](_0xda43fc(0x140)+this[_0xda43fc(0x182)],this[_0xda43fc(0x172)],this,_0xda43fc(0x171));}catch(_0x2ff2f9){this[_0xda43fc(0x16a)]('Error\x20during\x20process\x20execution:',_0x2ff2f9[_0xda43fc(0x162)]),process[_0xda43fc(0x149)](0x1);}}async[a0_0x4e320f(0x16a)](_0x251164,_0x5d5ce4){const _0x43810d=a0_0x4e320f;a0_0x9d9a88[_0x43810d(0x136)](_0x251164,this[_0x43810d(0x172)],this,_0x43810d(0x16c)+_0x5d5ce4),await this[_0x43810d(0x13c)](0xdac);}['sleep'](_0x33c0ce){return new Promise(_0x435e69=>setTimeout(_0x435e69,_0x33c0ce));}}