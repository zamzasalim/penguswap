const a0_0xda2d8a=a0_0x5c6b;(function(_0x3cc39d,_0x4305f9){const _0xc9d394=a0_0x5c6b,_0x11a122=_0x3cc39d();while(!![]){try{const _0x3e2622=-parseInt(_0xc9d394(0x176))/0x1+-parseInt(_0xc9d394(0x159))/0x2+parseInt(_0xc9d394(0x16c))/0x3*(-parseInt(_0xc9d394(0x190))/0x4)+parseInt(_0xc9d394(0x18b))/0x5*(-parseInt(_0xc9d394(0x178))/0x6)+parseInt(_0xc9d394(0x195))/0x7*(parseInt(_0xc9d394(0x16a))/0x8)+parseInt(_0xc9d394(0x19d))/0x9*(-parseInt(_0xc9d394(0x17f))/0xa)+parseInt(_0xc9d394(0x18f))/0xb*(parseInt(_0xc9d394(0x170))/0xc);if(_0x3e2622===_0x4305f9)break;else _0x11a122['push'](_0x11a122['shift']());}catch(_0x474462){_0x11a122['push'](_0x11a122['shift']());}}}(a0_0x43ff,0xc3d62));import{ethers}from'ethers';import a0_0x13d3c8 from'bignumber.js';import a0_0x52e44e from'../../utils/twister.js';import{nearestUsableTick}from'@uniswap/v3-sdk';import{POOL_ABI}from'../../abi/abi.js';function a0_0x5c6b(_0x119f35,_0x595d34){const _0x43ff08=a0_0x43ff();return a0_0x5c6b=function(_0x5c6b98,_0x299d11){_0x5c6b98=_0x5c6b98-0x154;let _0x10d695=_0x43ff08[_0x5c6b98];return _0x10d695;},a0_0x5c6b(_0x119f35,_0x595d34);}import a0_0x58e67d from'../../../setup.js';a0_0x13d3c8['config']({'EXPONENTIAL_AT':0xf423f,'DECIMAL_PLACES':0x28});export default class AddLiquidityManager{constructor(_0x546040,_0x1ef0ca){const _0x1afc72=a0_0x5c6b;this[_0x1afc72(0x15d)]=_0x546040,this[_0x1afc72(0x15b)]=_0x1ef0ca;}async[a0_0xda2d8a(0x171)](_0x3579f5){const _0x4d764e=a0_0xda2d8a,_0x5af7ad=new ethers[(_0x4d764e(0x16b))](_0x3579f5,POOL_ABI,this[_0x4d764e(0x15d)][_0x4d764e(0x186)]),[_0x8990b8,_0x2fc039,_0x31ddbf,_0x60e1be]=await Promise[_0x4d764e(0x160)]([_0x5af7ad[_0x4d764e(0x191)](),_0x5af7ad[_0x4d764e(0x16d)](),_0x5af7ad[_0x4d764e(0x17c)](),_0x5af7ad[_0x4d764e(0x161)]()]);return{'tickSpacing':_0x8990b8,'fee':_0x2fc039,'liquidity':_0x31ddbf,'sqrtPriceX96':_0x60e1be[0x0],'tick':_0x60e1be[0x1]};}[a0_0xda2d8a(0x197)](_0x495a81,_0x47fb82){const _0x524ddf=a0_0xda2d8a,_0x547091=new a0_0x13d3c8(_0x495a81['toString']())[_0x524ddf(0x164)](_0x47fb82[_0x524ddf(0x15f)]())[_0x524ddf(0x19c)]()[_0x524ddf(0x158)](new a0_0x13d3c8(0x2)[_0x524ddf(0x174)](0x60))[_0x524ddf(0x182)](a0_0x13d3c8['ROUND_DOWN'])['toFixed']();return BigInt(_0x547091);}async[a0_0xda2d8a(0x184)](_0x3e3a59,_0x3584f4,_0x56898a){const _0x4e5ac0=a0_0xda2d8a,_0x5004b9=await this[_0x4e5ac0(0x15d)][_0x4e5ac0(0x180)][_0x4e5ac0(0x196)][_0x4e5ac0(0x19f)](_0x3e3a59,_0x3584f4,_0x56898a);return _0x5004b9;}async[a0_0xda2d8a(0x19b)](_0x9cbf02,_0x2863cd,_0x42b7ee,_0x1b88c2){const _0x12fa48=a0_0xda2d8a;try{let _0x37a567=[ethers['getAddress'](_0x9cbf02),ethers[_0x12fa48(0x16f)](_0x2863cd),_0x42b7ee,_0x1b88c2];const [_0x72fccc,_0x2c2789]=await Promise[_0x12fa48(0x160)]([this['coreInstance'][_0x12fa48(0x179)](_0x9cbf02),this['coreInstance'][_0x12fa48(0x179)](_0x2863cd)]);let _0x505acd=this['coreInstance']['contracts'][_0x12fa48(0x17d)]['interface'][_0x12fa48(0x163)](_0x12fa48(0x168),_0x37a567);const _0x3254ad={'to':this[_0x12fa48(0x15d)][_0x12fa48(0x167)]['POSITION_MANAGER_ADDRESS'],'from':this[_0x12fa48(0x15d)]['address'],'value':0x0,'data':_0x505acd,'gasLimit':this[_0x12fa48(0x15d)][_0x12fa48(0x17a)],'gasPrice':this['coreInstance']['FIXED_GAS_PRICE'],'nonce':await this[_0x12fa48(0x15d)][_0x12fa48(0x199)][_0x12fa48(0x155)](this[_0x12fa48(0x15d)][_0x12fa48(0x1a0)])};try{const _0x21c993=_0x12fa48(0x17b)+_0x72fccc[_0x12fa48(0x177)]+'/'+_0x2c2789[_0x12fa48(0x177)],_0xe181ee=await this['serviceInstance'][_0x12fa48(0x17e)](async()=>{const _0xf06adb=_0x12fa48;return await this[_0xf06adb(0x15b)]['handleTransaction'](async()=>await this['coreInstance'][_0xf06adb(0x186)][_0xf06adb(0x18e)](_0x3254ad),_0x21c993);});if(!_0xe181ee){this[_0x12fa48(0x15d)][_0x12fa48(0x165)](_0x21c993,'‚ùå\x20Transaction\x20failed\x20to\x20send.');return;}const _0xc9b297=_0xe181ee[_0x12fa48(0x194)]||_0x12fa48(0x15e);await this[_0x12fa48(0x15b)][_0x12fa48(0x198)](_0xc9b297,_0x21c993);const _0x12ebff=await this[_0x12fa48(0x15d)][_0x12fa48(0x180)]['FACTORY'][_0x12fa48(0x19f)](_0x9cbf02,_0x2863cd,_0x42b7ee);return a0_0x52e44e[_0x12fa48(0x16e)](_0x21c993,this['coreInstance'][_0x12fa48(0x157)],this['coreInstance'],_0x12fa48(0x18c)+_0x72fccc[_0x12fa48(0x177)]+'/'+_0x2c2789[_0x12fa48(0x177)]+_0x12fa48(0x172)+_0x12ebff),_0x12ebff;}catch(_0x35a8f9){this['coreInstance']['handleError'](_0x12fa48(0x18a)+_0x72fccc[_0x12fa48(0x177)]+'/'+_0x2c2789[_0x12fa48(0x177)],''+_0x35a8f9[_0x12fa48(0x188)]);}}catch(_0x3d0569){this[_0x12fa48(0x15d)][_0x12fa48(0x165)](_0x12fa48(0x192),''+_0x3d0569[_0x12fa48(0x188)]);}}async[a0_0xda2d8a(0x19e)](_0x28a257,_0x931b82,_0x289451){const _0x7c973b=a0_0xda2d8a;try{const [_0x206a47,_0x3c21bb,_0x18f277]=await Promise['all']([this['coreInstance']['fetchTokenDetails'](_0x28a257),this[_0x7c973b(0x15d)]['fetchTokenDetails'](_0x931b82),this[_0x7c973b(0x184)](_0x28a257,_0x931b82,_0x289451)]),_0x563bf9=await this[_0x7c973b(0x171)](_0x18f277),_0x53d0a0=[_0x28a257,_0x931b82,_0x563bf9['fee'],nearestUsableTick(Number(_0x563bf9[_0x7c973b(0x193)]),Number(_0x563bf9['tickSpacing']))-Number(_0x563bf9[_0x7c973b(0x191)])*0x2,nearestUsableTick(Number(_0x563bf9[_0x7c973b(0x193)]),Number(_0x563bf9[_0x7c973b(0x191)]))+Number(_0x563bf9[_0x7c973b(0x191)])*0x2,BigInt(a0_0x58e67d['liquidityPool0']*0xde0b6b3a7640000)[_0x7c973b(0x15f)](),BigInt(a0_0x58e67d['liquidityPool1']*0xde0b6b3a7640000)[_0x7c973b(0x15f)](),0x0,0x0,this['coreInstance'][_0x7c973b(0x1a0)],Math[_0x7c973b(0x173)](Date['now']()/0x3e8)+0x3c*0xa];let _0x548768=this[_0x7c973b(0x15d)][_0x7c973b(0x180)]['POSITION_MANAGER'][_0x7c973b(0x156)][_0x7c973b(0x163)](_0x7c973b(0x187),[_0x53d0a0]);const _0x133e84={'to':this['coreInstance'][_0x7c973b(0x167)]['POSITION_MANAGER_ADDRESS'],'from':this[_0x7c973b(0x15d)][_0x7c973b(0x1a0)],'value':0x0,'data':_0x548768,'gasLimit':this[_0x7c973b(0x15d)][_0x7c973b(0x17a)],'gasPrice':this[_0x7c973b(0x15d)][_0x7c973b(0x183)],'nonce':await this[_0x7c973b(0x15d)][_0x7c973b(0x199)][_0x7c973b(0x155)](this[_0x7c973b(0x15d)]['address'])};try{const _0x10ceb5=_0x7c973b(0x166)+_0x206a47[_0x7c973b(0x177)]+'\x1b[0m\x20and\x20100\x20\x1b[1m'+_0x3c21bb['symbol']+_0x7c973b(0x18d),_0xd87329=await this[_0x7c973b(0x15b)][_0x7c973b(0x17e)](async()=>{const _0x5305f8=_0x7c973b;return await this[_0x5305f8(0x15b)][_0x5305f8(0x1a1)](async()=>await this[_0x5305f8(0x15d)][_0x5305f8(0x186)][_0x5305f8(0x18e)](_0x133e84),_0x10ceb5);});if(!_0xd87329){this[_0x7c973b(0x15d)][_0x7c973b(0x165)](_0x10ceb5,'‚ùå\x20Transaction\x20failed\x20to\x20send.');return;}const _0xafcb19=_0xd87329[_0x7c973b(0x194)]||_0x7c973b(0x15e);await this['serviceInstance'][_0x7c973b(0x198)](_0xafcb19,_0x10ceb5),a0_0x52e44e[_0x7c973b(0x16e)](''+_0x10ceb5,this['coreInstance'][_0x7c973b(0x157)],this['coreInstance'],'‚úîÔ∏è\x20\x20Successfully\x20added\x20liquidity\x20100\x20'+_0x206a47['symbol']+'\x20and\x20100\x20'+_0x3c21bb[_0x7c973b(0x177)]+_0x7c973b(0x15c));}catch(_0x20ad03){return this[_0x7c973b(0x15d)][_0x7c973b(0x165)]('Failed\x20to\x20add\x20liquidity\x20to\x20pool',''+_0x20ad03[_0x7c973b(0x188)]),null;}}catch(_0x5ed084){console['error'](_0x5ed084),this[_0x7c973b(0x15d)]['handleError'](_0x7c973b(0x154),''+_0x5ed084[_0x7c973b(0x188)]);}}async[a0_0xda2d8a(0x19a)](_0x448515){const _0x12ce6c=a0_0xda2d8a;try{const {POSITION_MANAGER:_0x4edaa1}=this[_0x12ce6c(0x15d)]['contracts'],_0xb1d04f=[_0x448515,this[_0x12ce6c(0x15d)][_0x12ce6c(0x1a0)],0xffffffffffffffffffffffffffffffffn,0xffffffffffffffffffffffffffffffffn];let _0x186bf7=_0x4edaa1['interface']['encodeFunctionData'](_0x12ce6c(0x162),[_0xb1d04f]);const _0x3186c0={'to':this[_0x12ce6c(0x15d)][_0x12ce6c(0x167)][_0x12ce6c(0x175)],'from':this[_0x12ce6c(0x15d)][_0x12ce6c(0x1a0)],'value':0x0,'data':_0x186bf7,'gasLimit':this[_0x12ce6c(0x15d)][_0x12ce6c(0x17a)],'gasPrice':this['coreInstance'][_0x12ce6c(0x183)],'nonce':await this[_0x12ce6c(0x15d)]['provider'][_0x12ce6c(0x155)](this[_0x12ce6c(0x15d)][_0x12ce6c(0x1a0)])};try{const _0x7b2c7f=_0x12ce6c(0x169)+_0x448515[_0x12ce6c(0x15f)](),_0x31de42=await this[_0x12ce6c(0x15b)][_0x12ce6c(0x17e)](async()=>{const _0x2d6e63=_0x12ce6c;return await this[_0x2d6e63(0x15b)][_0x2d6e63(0x1a1)](async()=>await this[_0x2d6e63(0x15d)][_0x2d6e63(0x186)]['sendTransaction'](_0x3186c0),_0x7b2c7f);});if(!_0x31de42){this[_0x12ce6c(0x15d)][_0x12ce6c(0x165)](_0x7b2c7f,'‚ùå\x20Transaction\x20failed\x20to\x20send.');return;}const _0x24930b=_0x31de42[_0x12ce6c(0x194)]||_0x12ce6c(0x15e);await this[_0x12ce6c(0x15b)][_0x12ce6c(0x198)](_0x24930b,_0x7b2c7f),a0_0x52e44e[_0x12ce6c(0x16e)](''+_0x7b2c7f,this[_0x12ce6c(0x15d)][_0x12ce6c(0x157)],this[_0x12ce6c(0x15d)],_0x12ce6c(0x15a)+_0x448515['toString']());}catch(_0x519905){return this[_0x12ce6c(0x15d)]['handleError'](_0x12ce6c(0x181),''+_0x519905[_0x12ce6c(0x188)]),null;}}catch(_0x5708a7){console[_0x12ce6c(0x189)](_0x5708a7),this['coreInstance']['handleError'](_0x12ce6c(0x185),''+_0x5708a7[_0x12ce6c(0x188)]);}}}function a0_0x43ff(){const _0x424752=['28518ufPhxF','fetchTokenDetails','FIXED_GAS_LIMIT','üî®\x20Deploying\x20Liquidity\x20Pool\x20Contract\x20for\x20','liquidity','POSITION_MANAGER','retryTransaction','4110VMhrKT','contracts','Failed\x20to\x20Collecting\x20fee','integerValue','FIXED_GAS_PRICE','getPoolAddress','Failed\x20to\x20collecting\x20Fee!','walletInstance','mint','message','error','Failed\x20to\x20deploy\x20liquidity\x20pool\x20','910TMOifF','‚úîÔ∏è\x20\x20Successfully\x20deployed\x20pool\x20','\x1b[0m\x20to\x20pool.','sendTransaction','4851869DPxUhQ','320440vKOdDT','tickSpacing','Failed\x20to\x20deploy\x20liquidity\x20pool','tick','hash','52143jJMxqK','FACTORY','encodePriceSqrt','waitForTransactionConfirmation','provider','collectFee','deployPool','sqrt','32265lJYPqp','addLiquidity','getPool','address','handleTransaction','Failed\x20to\x20added\x20liquidity!','getTransactionCount','interface','accounts','multipliedBy','1661356VFHsPu','‚úîÔ∏è\x20\x20Successfully\x20Collecting\x20fee\x20for\x20possitionId\x20','serviceInstance','\x20to\x20pool.','coreInstance','N/A','toString','all','slot0','collect','encodeFunctionData','div','handleError','üî®\x20Adding\x20100\x20\x1b[1m','CONTRACT_ADDRESS','createAndInitializePoolIfNecessary','üî®\x20Collecting\x20fee\x20for\x20possitionId\x20','1064iGKyZG','Contract','48opxmjs','fee','log','getAddress','132oeJFWq','getPoolData','\x20contract\x20at:\x20','floor','pow','POSITION_MANAGER_ADDRESS','589521PoATHn','symbol'];a0_0x43ff=function(){return _0x424752;};return a0_0x43ff();}