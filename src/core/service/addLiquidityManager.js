const a0_0x311f6b=a0_0x13e0;function a0_0x455d(){const _0x59a0b1=['serviceInstance','mint','waitForTransactionConfirmation','3921237wiGAkz','POSITION_MANAGER_ADDRESS','FIXED_GAS_PRICE','retryTransaction','toString','all','message','symbol','address','slot0','ROUND_DOWN','\x1b[0m\x20to\x20pool.','tickSpacing','âœ”ï¸\x20\x20Successfully\x20deployed\x20pool\x20','liquidity','199078NPMEom','getPoolData','ðŸ”¨\x20Deploying\x20Liquidity\x20Pool\x20Contract\x20for\x20','log','sendTransaction','provider','POSITION_MANAGER','coreInstance','pow','Failed\x20to\x20add\x20liquidity\x20to\x20pool','error','floor','ðŸ”¨\x20Adding\x20','liquidityPool1','addLiquidity','CONTRACT_ADDRESS','encodePriceSqrt','4028521jtewMX','contracts','walletInstance','23BWMAvt','FACTORY','tick','interface','fee','getPoolAddress','collectFee','ðŸ”¨\x20Collecting\x20fee\x20for\x20possitionId\x20','âœ”ï¸\x20\x20Successfully\x20Collecting\x20fee\x20for\x20possitionId\x20','1433616LOtbAm','1795pwNRNu','deployPool','hash','multipliedBy','Contract','\x20contract\x20at:\x20','now','getAddress','getTransactionCount','34478CuJpyr','accounts','toFixed','getPool','222435ulFChu','âŒ\x20Transaction\x20failed\x20to\x20send.','580kQXgli','fetchTokenDetails','liquidityPool0','\x20\x1b[1m','120ceZand','11202pdgqDu','handleTransaction','handleError','createAndInitializePoolIfNecessary','config','Failed\x20to\x20Collecting\x20fee','N/A','\x20and\x20','encodeFunctionData','collect'];a0_0x455d=function(){return _0x59a0b1;};return a0_0x455d();}(function(_0x12e907,_0x31e466){const _0x2945fc=a0_0x13e0,_0x4591b4=_0x12e907();while(!![]){try{const _0x1552c2=-parseInt(_0x2945fc(0x1c7))/0x1*(parseInt(_0x2945fc(0x1da))/0x2)+parseInt(_0x2945fc(0x1f2))/0x3+parseInt(_0x2945fc(0x1d0))/0x4+-parseInt(_0x2945fc(0x1d1))/0x5*(-parseInt(_0x2945fc(0x1e5))/0x6)+-parseInt(_0x2945fc(0x1c4))/0x7+-parseInt(_0x2945fc(0x1e4))/0x8*(-parseInt(_0x2945fc(0x1de))/0x9)+parseInt(_0x2945fc(0x1e0))/0xa*(-parseInt(_0x2945fc(0x201))/0xb);if(_0x1552c2===_0x31e466)break;else _0x4591b4['push'](_0x4591b4['shift']());}catch(_0x313e23){_0x4591b4['push'](_0x4591b4['shift']());}}}(a0_0x455d,0xa72e9));import{ethers}from'ethers';import a0_0x2e7fff from'bignumber.js';function a0_0x13e0(_0x464291,_0x222c28){const _0x455d43=a0_0x455d();return a0_0x13e0=function(_0x13e0b0,_0x5a4f25){_0x13e0b0=_0x13e0b0-0x1c1;let _0x33db01=_0x455d43[_0x13e0b0];return _0x33db01;},a0_0x13e0(_0x464291,_0x222c28);}import a0_0x3f0113 from'../../utils/twister.js';import{nearestUsableTick}from'@uniswap/v3-sdk';import{POOL_ABI}from'../../abi/abi.js';import a0_0x2a0ce1 from'../../../setup.js';a0_0x2e7fff[a0_0x311f6b(0x1e9)]({'EXPONENTIAL_AT':0xf423f,'DECIMAL_PLACES':0x28});export default class AddLiquidityManager{constructor(_0x2a442c,_0x2cfb9b){const _0x4f5af7=a0_0x311f6b;this[_0x4f5af7(0x208)]=_0x2a442c,this['serviceInstance']=_0x2cfb9b;}async[a0_0x311f6b(0x202)](_0xadc812){const _0x2c2110=a0_0x311f6b,_0x59fef5=new ethers[(_0x2c2110(0x1d5))](_0xadc812,POOL_ABI,this[_0x2c2110(0x208)]['walletInstance']),[_0x35756b,_0x47d74d,_0x4cf565,_0x3b85b4]=await Promise[_0x2c2110(0x1f7)]([_0x59fef5[_0x2c2110(0x1fe)](),_0x59fef5[_0x2c2110(0x1cb)](),_0x59fef5[_0x2c2110(0x200)](),_0x59fef5[_0x2c2110(0x1fb)]()]);return{'tickSpacing':_0x35756b,'fee':_0x47d74d,'liquidity':_0x4cf565,'sqrtPriceX96':_0x3b85b4[0x0],'tick':_0x3b85b4[0x1]};}[a0_0x311f6b(0x1c3)](_0x4a75fe,_0x1f89fd){const _0x281593=a0_0x311f6b,_0x470526=new a0_0x2e7fff(_0x4a75fe['toString']())['div'](_0x1f89fd[_0x281593(0x1f6)]())['sqrt']()[_0x281593(0x1d4)](new a0_0x2e7fff(0x2)[_0x281593(0x209)](0x60))['integerValue'](a0_0x2e7fff[_0x281593(0x1fc)])[_0x281593(0x1dc)]();return BigInt(_0x470526);}async[a0_0x311f6b(0x1cc)](_0x305f60,_0x39d0be,_0x5670c1){const _0x3c25f0=a0_0x311f6b,_0x13bd22=await this['coreInstance'][_0x3c25f0(0x1c5)][_0x3c25f0(0x1c8)]['getPool'](_0x305f60,_0x39d0be,_0x5670c1);return _0x13bd22;}async[a0_0x311f6b(0x1d2)](_0x4c9c30,_0x4509b4,_0x3de39d,_0x280b74){const _0x980a89=a0_0x311f6b;try{let _0x32904e=[ethers['getAddress'](_0x4c9c30),ethers[_0x980a89(0x1d8)](_0x4509b4),_0x3de39d,_0x280b74];const [_0x63d89e,_0x5f16cc]=await Promise[_0x980a89(0x1f7)]([this[_0x980a89(0x208)][_0x980a89(0x1e1)](_0x4c9c30),this[_0x980a89(0x208)][_0x980a89(0x1e1)](_0x4509b4)]);let _0x5bad6d=this['coreInstance']['contracts']['POSITION_MANAGER'][_0x980a89(0x1ca)][_0x980a89(0x1ed)](_0x980a89(0x1e8),_0x32904e);const _0x360189={'to':this[_0x980a89(0x208)][_0x980a89(0x1c2)][_0x980a89(0x1f3)],'from':this[_0x980a89(0x208)]['address'],'value':0x0,'data':_0x5bad6d,'gasLimit':this[_0x980a89(0x208)]['FIXED_GAS_LIMIT'],'gasPrice':this[_0x980a89(0x208)][_0x980a89(0x1f4)],'nonce':await this[_0x980a89(0x208)][_0x980a89(0x206)][_0x980a89(0x1d9)](this[_0x980a89(0x208)][_0x980a89(0x1fa)])};try{const _0x4da045=_0x980a89(0x203)+_0x63d89e[_0x980a89(0x1f9)]+'/'+_0x5f16cc[_0x980a89(0x1f9)],_0x1d8382=await this[_0x980a89(0x1ef)][_0x980a89(0x1f5)](async()=>{const _0x3d13ad=_0x980a89;return await this[_0x3d13ad(0x1ef)][_0x3d13ad(0x1e6)](async()=>await this[_0x3d13ad(0x208)][_0x3d13ad(0x1c6)][_0x3d13ad(0x205)](_0x360189),_0x4da045);});if(!_0x1d8382){this[_0x980a89(0x208)][_0x980a89(0x1e7)](_0x4da045,_0x980a89(0x1df));return;}const _0x3c00d9=_0x1d8382[_0x980a89(0x1d3)]||_0x980a89(0x1eb);await this[_0x980a89(0x1ef)]['waitForTransactionConfirmation'](_0x3c00d9,_0x4da045);const _0x1ed5c0=await this[_0x980a89(0x208)][_0x980a89(0x1c5)]['FACTORY'][_0x980a89(0x1dd)](_0x4c9c30,_0x4509b4,_0x3de39d);return a0_0x3f0113[_0x980a89(0x204)](_0x4da045,this[_0x980a89(0x208)][_0x980a89(0x1db)],this[_0x980a89(0x208)],_0x980a89(0x1ff)+_0x63d89e[_0x980a89(0x1f9)]+'/'+_0x5f16cc['symbol']+_0x980a89(0x1d6)+_0x1ed5c0),_0x1ed5c0;}catch(_0x40e268){this[_0x980a89(0x208)][_0x980a89(0x1e7)]('Failed\x20to\x20deploy\x20liquidity\x20pool\x20'+_0x63d89e[_0x980a89(0x1f9)]+'/'+_0x5f16cc['symbol'],''+_0x40e268['message']);}}catch(_0x1b0c3a){this['coreInstance'][_0x980a89(0x1e7)]('Failed\x20to\x20deploy\x20liquidity\x20pool',''+_0x1b0c3a[_0x980a89(0x1f8)]);}}async[a0_0x311f6b(0x1c1)](_0x870fea,_0x26a0df,_0x44ebe4){const _0x50dd8f=a0_0x311f6b;try{const [_0x46df36,_0x382a05,_0x4d5550]=await Promise[_0x50dd8f(0x1f7)]([this['coreInstance'][_0x50dd8f(0x1e1)](_0x870fea),this[_0x50dd8f(0x208)][_0x50dd8f(0x1e1)](_0x26a0df),this[_0x50dd8f(0x1cc)](_0x870fea,_0x26a0df,_0x44ebe4)]),_0x47b9e9=await this[_0x50dd8f(0x202)](_0x4d5550),_0xa01a6a=[_0x870fea,_0x26a0df,_0x47b9e9['fee'],nearestUsableTick(Number(_0x47b9e9[_0x50dd8f(0x1c9)]),Number(_0x47b9e9[_0x50dd8f(0x1fe)]))-Number(_0x47b9e9[_0x50dd8f(0x1fe)])*0x2,nearestUsableTick(Number(_0x47b9e9[_0x50dd8f(0x1c9)]),Number(_0x47b9e9[_0x50dd8f(0x1fe)]))+Number(_0x47b9e9['tickSpacing'])*0x2,BigInt(a0_0x2a0ce1['liquidityPool0']*0xde0b6b3a7640000)['toString'](),BigInt(a0_0x2a0ce1[_0x50dd8f(0x20e)]*0xde0b6b3a7640000)[_0x50dd8f(0x1f6)](),0x0,0x0,this['coreInstance'][_0x50dd8f(0x1fa)],Math[_0x50dd8f(0x20c)](Date[_0x50dd8f(0x1d7)]()/0x3e8)+0x3c*0xa];let _0x3f8a10=this[_0x50dd8f(0x208)][_0x50dd8f(0x1c5)][_0x50dd8f(0x207)]['interface'][_0x50dd8f(0x1ed)](_0x50dd8f(0x1f0),[_0xa01a6a]);const _0xd4b0fe={'to':this[_0x50dd8f(0x208)][_0x50dd8f(0x1c2)][_0x50dd8f(0x1f3)],'from':this[_0x50dd8f(0x208)][_0x50dd8f(0x1fa)],'value':0x0,'data':_0x3f8a10,'gasLimit':this[_0x50dd8f(0x208)]['FIXED_GAS_LIMIT'],'gasPrice':this[_0x50dd8f(0x208)][_0x50dd8f(0x1f4)],'nonce':await this[_0x50dd8f(0x208)][_0x50dd8f(0x206)][_0x50dd8f(0x1d9)](this['coreInstance'][_0x50dd8f(0x1fa)])};try{const _0xaff6f7=_0x50dd8f(0x20d)+a0_0x2a0ce1[_0x50dd8f(0x1e2)]+_0x50dd8f(0x1e3)+_0x46df36[_0x50dd8f(0x1f9)]+'\x1b[0m\x20and\x20'+a0_0x2a0ce1[_0x50dd8f(0x20e)]+_0x50dd8f(0x1e3)+_0x382a05[_0x50dd8f(0x1f9)]+_0x50dd8f(0x1fd),_0x3bf2e5=await this[_0x50dd8f(0x1ef)][_0x50dd8f(0x1f5)](async()=>{const _0x188f2e=_0x50dd8f;return await this[_0x188f2e(0x1ef)]['handleTransaction'](async()=>await this[_0x188f2e(0x208)]['walletInstance'][_0x188f2e(0x205)](_0xd4b0fe),_0xaff6f7);});if(!_0x3bf2e5){this[_0x50dd8f(0x208)][_0x50dd8f(0x1e7)](_0xaff6f7,_0x50dd8f(0x1df));return;}const _0x21ee5b=_0x3bf2e5[_0x50dd8f(0x1d3)]||_0x50dd8f(0x1eb);await this[_0x50dd8f(0x1ef)]['waitForTransactionConfirmation'](_0x21ee5b,_0xaff6f7),a0_0x3f0113[_0x50dd8f(0x204)](''+_0xaff6f7,this[_0x50dd8f(0x208)][_0x50dd8f(0x1db)],this[_0x50dd8f(0x208)],'âœ”ï¸\x20\x20Successfully\x20added\x20liquidity\x20'+a0_0x2a0ce1[_0x50dd8f(0x1e2)]+'\x20'+_0x46df36[_0x50dd8f(0x1f9)]+_0x50dd8f(0x1ec)+a0_0x2a0ce1[_0x50dd8f(0x20e)]+'\x20'+_0x382a05['symbol']+'\x20to\x20pool.');}catch(_0x341877){return this['coreInstance']['handleError'](_0x50dd8f(0x20a),''+_0x341877[_0x50dd8f(0x1f8)]),null;}}catch(_0x146f59){console[_0x50dd8f(0x20b)](_0x146f59),this['coreInstance'][_0x50dd8f(0x1e7)]('Failed\x20to\x20added\x20liquidity!',''+_0x146f59['message']);}}async[a0_0x311f6b(0x1cd)](_0x5b0918){const _0xd6b34a=a0_0x311f6b;try{const {POSITION_MANAGER:_0x34bdc5}=this['coreInstance'][_0xd6b34a(0x1c5)],_0x15ad43=[_0x5b0918,this[_0xd6b34a(0x208)]['address'],0xffffffffffffffffffffffffffffffffn,0xffffffffffffffffffffffffffffffffn];let _0x56a10c=_0x34bdc5[_0xd6b34a(0x1ca)][_0xd6b34a(0x1ed)](_0xd6b34a(0x1ee),[_0x15ad43]);const _0xf9d825={'to':this[_0xd6b34a(0x208)][_0xd6b34a(0x1c2)][_0xd6b34a(0x1f3)],'from':this['coreInstance'][_0xd6b34a(0x1fa)],'value':0x0,'data':_0x56a10c,'gasLimit':this['coreInstance']['FIXED_GAS_LIMIT'],'gasPrice':this[_0xd6b34a(0x208)][_0xd6b34a(0x1f4)],'nonce':await this['coreInstance']['provider']['getTransactionCount'](this['coreInstance']['address'])};try{const _0x1adf39=_0xd6b34a(0x1ce)+_0x5b0918['toString'](),_0x2e8b43=await this[_0xd6b34a(0x1ef)][_0xd6b34a(0x1f5)](async()=>{const _0x5be23e=_0xd6b34a;return await this[_0x5be23e(0x1ef)][_0x5be23e(0x1e6)](async()=>await this[_0x5be23e(0x208)]['walletInstance'][_0x5be23e(0x205)](_0xf9d825),_0x1adf39);});if(!_0x2e8b43){this[_0xd6b34a(0x208)]['handleError'](_0x1adf39,_0xd6b34a(0x1df));return;}const _0x70f1f3=_0x2e8b43['hash']||_0xd6b34a(0x1eb);await this[_0xd6b34a(0x1ef)][_0xd6b34a(0x1f1)](_0x70f1f3,_0x1adf39),a0_0x3f0113[_0xd6b34a(0x204)](''+_0x1adf39,this['coreInstance'][_0xd6b34a(0x1db)],this['coreInstance'],_0xd6b34a(0x1cf)+_0x5b0918[_0xd6b34a(0x1f6)]());}catch(_0x14719f){return this[_0xd6b34a(0x208)][_0xd6b34a(0x1e7)](_0xd6b34a(0x1ea),''+_0x14719f[_0xd6b34a(0x1f8)]),null;}}catch(_0x53f05b){console[_0xd6b34a(0x20b)](_0x53f05b),this[_0xd6b34a(0x208)][_0xd6b34a(0x1e7)]('Failed\x20to\x20collecting\x20Fee!',''+_0x53f05b['message']);}}}