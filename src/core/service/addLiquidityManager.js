const a0_0x41af34=a0_0x185d;(function(_0x992882,_0x59e49c){const _0xa0e10e=a0_0x185d,_0x17ed42=_0x992882();while(!![]){try{const _0x1bfaf9=-parseInt(_0xa0e10e(0xd4))/0x1*(-parseInt(_0xa0e10e(0xc9))/0x2)+parseInt(_0xa0e10e(0xab))/0x3+-parseInt(_0xa0e10e(0xd5))/0x4+-parseInt(_0xa0e10e(0x92))/0x5*(-parseInt(_0xa0e10e(0xa7))/0x6)+parseInt(_0xa0e10e(0xd0))/0x7+parseInt(_0xa0e10e(0x98))/0x8+-parseInt(_0xa0e10e(0xba))/0x9*(parseInt(_0xa0e10e(0xa1))/0xa);if(_0x1bfaf9===_0x59e49c)break;else _0x17ed42['push'](_0x17ed42['shift']());}catch(_0x573bbe){_0x17ed42['push'](_0x17ed42['shift']());}}}(a0_0x403d,0x398aa));function a0_0x185d(_0x244fb0,_0x1c6764){const _0x403db8=a0_0x403d();return a0_0x185d=function(_0x185d5c,_0x15e073){_0x185d5c=_0x185d5c-0x8b;let _0x1798d6=_0x403db8[_0x185d5c];return _0x1798d6;},a0_0x185d(_0x244fb0,_0x1c6764);}import{ethers}from'ethers';import a0_0xcbfbda from'bignumber.js';import a0_0x127333 from'../../utils/twister.js';import{nearestUsableTick}from'@uniswap/v3-sdk';function a0_0x403d(){const _0x4436ad=['encodeFunctionData','address','multipliedBy','waitForTransactionConfirmation','retryTransaction','809669AblUSb','ROUND_DOWN','walletInstance','config','1HJUQvq','320724EFjnua','N/A','Contract','FACTORY','integerValue','message','🔨\x20Adding\x20100\x20\x1b[1m','getTransactionCount','floor','tickSpacing','246315dXLcFL','❌\x20Transaction\x20failed\x20to\x20send.','liquidityPool1','✔️\x20\x20Successfully\x20deployed\x20pool\x20','pow','toString','1039968ipXvhr','all','fee','toFixed','getAddress','contracts','sendTransaction','log','serviceInstance','5920BRkfDZ','addLiquidity','FIXED_GAS_LIMIT','sqrt','POSITION_MANAGER_ADDRESS','error','18pooYky','hash','✔️\x20\x20Successfully\x20Collecting\x20fee\x20for\x20possitionId\x20','tick','1305792PVcDcn','interface','now','coreInstance','POSITION_MANAGER','liquidityPool0','\x1b[0m\x20to\x20pool.','\x20and\x20100\x20','Failed\x20to\x20collecting\x20Fee!','symbol','collect','collectFee','deployPool','getPool','handleError','14409VRQgCy','Failed\x20to\x20deploy\x20liquidity\x20pool\x20','fetchTokenDetails','🔨\x20Deploying\x20Liquidity\x20Pool\x20Contract\x20for\x20','getPoolData','✔️\x20\x20Successfully\x20added\x20liquidity\x20100\x20','div','FIXED_GAS_PRICE','CONTRACT_ADDRESS','\x20contract\x20at:\x20','handleTransaction','🔨\x20Collecting\x20fee\x20for\x20possitionId\x20','Failed\x20to\x20added\x20liquidity!','accounts','provider','869894LFttqv','Failed\x20to\x20add\x20liquidity\x20to\x20pool'];a0_0x403d=function(){return _0x4436ad;};return a0_0x403d();}import{POOL_ABI}from'../../abi/abi.js';import a0_0x2ab01a from'../../../setup.js';a0_0xcbfbda[a0_0x41af34(0xd3)]({'EXPONENTIAL_AT':0xf423f,'DECIMAL_PLACES':0x28});export default class AddLiquidityManager{constructor(_0x264d31,_0xde4d08){const _0x4de464=a0_0x41af34;this[_0x4de464(0xae)]=_0x264d31,this[_0x4de464(0xa0)]=_0xde4d08;}async[a0_0x41af34(0xbe)](_0x24937f){const _0x1949f4=a0_0x41af34,_0x20f54a=new ethers[(_0x1949f4(0xd7))](_0x24937f,POOL_ABI,this[_0x1949f4(0xae)][_0x1949f4(0xd2)]),[_0x5e72d1,_0x517e6a,_0x1f555c,_0x383827]=await Promise['all']([_0x20f54a[_0x1949f4(0x91)](),_0x20f54a[_0x1949f4(0x9a)](),_0x20f54a['liquidity'](),_0x20f54a['slot0']()]);return{'tickSpacing':_0x5e72d1,'fee':_0x517e6a,'liquidity':_0x1f555c,'sqrtPriceX96':_0x383827[0x0],'tick':_0x383827[0x1]};}['encodePriceSqrt'](_0x43afa0,_0x3ec4ba){const _0x23e331=a0_0x41af34,_0x4e256b=new a0_0xcbfbda(_0x43afa0['toString']())[_0x23e331(0xc0)](_0x3ec4ba['toString']())[_0x23e331(0xa4)]()[_0x23e331(0xcd)](new a0_0xcbfbda(0x2)[_0x23e331(0x96)](0x60))[_0x23e331(0x8c)](a0_0xcbfbda[_0x23e331(0xd1)])[_0x23e331(0x9b)]();return BigInt(_0x4e256b);}async['getPoolAddress'](_0x44f91f,_0x5ebf76,_0x5de273){const _0x1eafe6=a0_0x41af34,_0x4eb0b8=await this[_0x1eafe6(0xae)][_0x1eafe6(0x9d)]['FACTORY'][_0x1eafe6(0xb8)](_0x44f91f,_0x5ebf76,_0x5de273);return _0x4eb0b8;}async[a0_0x41af34(0xb7)](_0x193165,_0x4bfcf6,_0x25b628,_0x4b422d){const _0x49c5a9=a0_0x41af34;try{let _0x4f4c54=[ethers[_0x49c5a9(0x9c)](_0x193165),ethers[_0x49c5a9(0x9c)](_0x4bfcf6),_0x25b628,_0x4b422d];const [_0x5b8bb1,_0x58247c]=await Promise[_0x49c5a9(0x99)]([this[_0x49c5a9(0xae)][_0x49c5a9(0xbc)](_0x193165),this['coreInstance']['fetchTokenDetails'](_0x4bfcf6)]);let _0x1049be=this[_0x49c5a9(0xae)]['contracts']['POSITION_MANAGER']['interface'][_0x49c5a9(0xcb)]('createAndInitializePoolIfNecessary',_0x4f4c54);const _0x2a60aa={'to':this['coreInstance'][_0x49c5a9(0xc2)]['POSITION_MANAGER_ADDRESS'],'from':this[_0x49c5a9(0xae)][_0x49c5a9(0xcc)],'value':0x0,'data':_0x1049be,'gasLimit':this[_0x49c5a9(0xae)][_0x49c5a9(0xa3)],'gasPrice':this[_0x49c5a9(0xae)][_0x49c5a9(0xc1)],'nonce':await this[_0x49c5a9(0xae)][_0x49c5a9(0xc8)][_0x49c5a9(0x8f)](this[_0x49c5a9(0xae)][_0x49c5a9(0xcc)])};try{const _0x4f80e2=_0x49c5a9(0xbd)+_0x5b8bb1['symbol']+'/'+_0x58247c['symbol'],_0x44c235=await this['serviceInstance'][_0x49c5a9(0xcf)](async()=>{const _0x599388=_0x49c5a9;return await this[_0x599388(0xa0)][_0x599388(0xc4)](async()=>await this[_0x599388(0xae)][_0x599388(0xd2)][_0x599388(0x9e)](_0x2a60aa),_0x4f80e2);});if(!_0x44c235){this[_0x49c5a9(0xae)][_0x49c5a9(0xb9)](_0x4f80e2,_0x49c5a9(0x93));return;}const _0x185116=_0x44c235[_0x49c5a9(0xa8)]||'N/A';await this[_0x49c5a9(0xa0)][_0x49c5a9(0xce)](_0x185116,_0x4f80e2);const _0x5287a5=await this['coreInstance'][_0x49c5a9(0x9d)][_0x49c5a9(0x8b)][_0x49c5a9(0xb8)](_0x193165,_0x4bfcf6,_0x25b628);return a0_0x127333[_0x49c5a9(0x9f)](_0x4f80e2,this[_0x49c5a9(0xae)]['accounts'],this[_0x49c5a9(0xae)],_0x49c5a9(0x95)+_0x5b8bb1[_0x49c5a9(0xb4)]+'/'+_0x58247c[_0x49c5a9(0xb4)]+_0x49c5a9(0xc3)+_0x5287a5),_0x5287a5;}catch(_0x259b75){this['coreInstance'][_0x49c5a9(0xb9)](_0x49c5a9(0xbb)+_0x5b8bb1[_0x49c5a9(0xb4)]+'/'+_0x58247c[_0x49c5a9(0xb4)],''+_0x259b75[_0x49c5a9(0x8d)]);}}catch(_0x3d73d9){this[_0x49c5a9(0xae)]['handleError']('Failed\x20to\x20deploy\x20liquidity\x20pool',''+_0x3d73d9['message']);}}async[a0_0x41af34(0xa2)](_0x25309a,_0xab19a8,_0x32eda6){const _0x4b78b9=a0_0x41af34;try{const [_0x1fd7ad,_0x2d8494,_0x1c1637]=await Promise[_0x4b78b9(0x99)]([this[_0x4b78b9(0xae)][_0x4b78b9(0xbc)](_0x25309a),this[_0x4b78b9(0xae)]['fetchTokenDetails'](_0xab19a8),this['getPoolAddress'](_0x25309a,_0xab19a8,_0x32eda6)]),_0x21a61b=await this[_0x4b78b9(0xbe)](_0x1c1637),_0x26efc0=[_0x25309a,_0xab19a8,_0x21a61b[_0x4b78b9(0x9a)],nearestUsableTick(Number(_0x21a61b[_0x4b78b9(0xaa)]),Number(_0x21a61b[_0x4b78b9(0x91)]))-Number(_0x21a61b[_0x4b78b9(0x91)])*0x2,nearestUsableTick(Number(_0x21a61b[_0x4b78b9(0xaa)]),Number(_0x21a61b[_0x4b78b9(0x91)]))+Number(_0x21a61b[_0x4b78b9(0x91)])*0x2,Number(a0_0x2ab01a[_0x4b78b9(0xb0)]*0xde0b6b3a7640000)['toString'](),Number(a0_0x2ab01a[_0x4b78b9(0x94)]*0xde0b6b3a7640000)[_0x4b78b9(0x97)](),0x0,0x0,this[_0x4b78b9(0xae)][_0x4b78b9(0xcc)],Math[_0x4b78b9(0x90)](Date[_0x4b78b9(0xad)]()/0x3e8)+0x3c*0xa];let _0x4f5a56=this['coreInstance'][_0x4b78b9(0x9d)][_0x4b78b9(0xaf)][_0x4b78b9(0xac)][_0x4b78b9(0xcb)]('mint',[_0x26efc0]);const _0x55bb11={'to':this[_0x4b78b9(0xae)][_0x4b78b9(0xc2)][_0x4b78b9(0xa5)],'from':this['coreInstance']['address'],'value':0x0,'data':_0x4f5a56,'gasLimit':this[_0x4b78b9(0xae)]['FIXED_GAS_LIMIT'],'gasPrice':this[_0x4b78b9(0xae)][_0x4b78b9(0xc1)],'nonce':await this['coreInstance'][_0x4b78b9(0xc8)][_0x4b78b9(0x8f)](this[_0x4b78b9(0xae)][_0x4b78b9(0xcc)])};try{const _0x64ba84=_0x4b78b9(0x8e)+_0x1fd7ad[_0x4b78b9(0xb4)]+'\x1b[0m\x20and\x20100\x20\x1b[1m'+_0x2d8494['symbol']+_0x4b78b9(0xb1),_0x3a52b7=await this[_0x4b78b9(0xa0)]['retryTransaction'](async()=>{const _0x1c42f4=_0x4b78b9;return await this[_0x1c42f4(0xa0)][_0x1c42f4(0xc4)](async()=>await this[_0x1c42f4(0xae)][_0x1c42f4(0xd2)]['sendTransaction'](_0x55bb11),_0x64ba84);});if(!_0x3a52b7){this[_0x4b78b9(0xae)][_0x4b78b9(0xb9)](_0x64ba84,_0x4b78b9(0x93));return;}const _0x5291ff=_0x3a52b7[_0x4b78b9(0xa8)]||_0x4b78b9(0xd6);await this[_0x4b78b9(0xa0)][_0x4b78b9(0xce)](_0x5291ff,_0x64ba84),a0_0x127333[_0x4b78b9(0x9f)](''+_0x64ba84,this[_0x4b78b9(0xae)][_0x4b78b9(0xc7)],this[_0x4b78b9(0xae)],_0x4b78b9(0xbf)+_0x1fd7ad[_0x4b78b9(0xb4)]+_0x4b78b9(0xb2)+_0x2d8494[_0x4b78b9(0xb4)]+'\x20to\x20pool.');}catch(_0x1757e5){return this[_0x4b78b9(0xae)]['handleError'](_0x4b78b9(0xca),''+_0x1757e5['message']),null;}}catch(_0x5905b9){console[_0x4b78b9(0xa6)](_0x5905b9),this[_0x4b78b9(0xae)][_0x4b78b9(0xb9)](_0x4b78b9(0xc6),''+_0x5905b9[_0x4b78b9(0x8d)]);}}async[a0_0x41af34(0xb6)](_0x214951){const _0x5ec927=a0_0x41af34;try{const {POSITION_MANAGER:_0x3fcbc6}=this[_0x5ec927(0xae)][_0x5ec927(0x9d)],_0x43de28=[_0x214951,this[_0x5ec927(0xae)]['address'],0xffffffffffffffffffffffffffffffffn,0xffffffffffffffffffffffffffffffffn];let _0x1ce002=_0x3fcbc6['interface'][_0x5ec927(0xcb)](_0x5ec927(0xb5),[_0x43de28]);const _0x32298a={'to':this[_0x5ec927(0xae)][_0x5ec927(0xc2)][_0x5ec927(0xa5)],'from':this[_0x5ec927(0xae)][_0x5ec927(0xcc)],'value':0x0,'data':_0x1ce002,'gasLimit':this['coreInstance']['FIXED_GAS_LIMIT'],'gasPrice':this[_0x5ec927(0xae)][_0x5ec927(0xc1)],'nonce':await this[_0x5ec927(0xae)][_0x5ec927(0xc8)][_0x5ec927(0x8f)](this[_0x5ec927(0xae)][_0x5ec927(0xcc)])};try{const _0x15f9c5=_0x5ec927(0xc5)+_0x214951['toString'](),_0x4309ea=await this['serviceInstance'][_0x5ec927(0xcf)](async()=>{const _0x91893b=_0x5ec927;return await this[_0x91893b(0xa0)][_0x91893b(0xc4)](async()=>await this[_0x91893b(0xae)][_0x91893b(0xd2)][_0x91893b(0x9e)](_0x32298a),_0x15f9c5);});if(!_0x4309ea){this['coreInstance'][_0x5ec927(0xb9)](_0x15f9c5,_0x5ec927(0x93));return;}const _0x24ce8c=_0x4309ea['hash']||_0x5ec927(0xd6);await this[_0x5ec927(0xa0)][_0x5ec927(0xce)](_0x24ce8c,_0x15f9c5),a0_0x127333[_0x5ec927(0x9f)](''+_0x15f9c5,this[_0x5ec927(0xae)][_0x5ec927(0xc7)],this[_0x5ec927(0xae)],_0x5ec927(0xa9)+_0x214951[_0x5ec927(0x97)]());}catch(_0x3b8bb3){return this[_0x5ec927(0xae)]['handleError']('Failed\x20to\x20Collecting\x20fee',''+_0x3b8bb3['message']),null;}}catch(_0x575d83){console['error'](_0x575d83),this[_0x5ec927(0xae)][_0x5ec927(0xb9)](_0x5ec927(0xb3),''+_0x575d83[_0x5ec927(0x8d)]);}}}