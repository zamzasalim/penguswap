function a0_0x58d8(_0x28d86b,_0x4391d8){const _0x743f26=a0_0x743f();return a0_0x58d8=function(_0x58d83c,_0x570aab){_0x58d83c=_0x58d83c-0x19c;let _0xf97aca=_0x743f26[_0x58d83c];return _0xf97aca;},a0_0x58d8(_0x28d86b,_0x4391d8);}function a0_0x743f(){const _0x4db2f5=['walletInstance','serviceManager','error','toFixed','message','WCTC_ADDRESS','getTransactionCount','1295wTqInI','121HmVFZk','‚úîÔ∏è\x20\x20Unwrapping\x20','address','log','8805SoDTHu','sendTransaction','parseEther','FIXED_GAS_LIMIT','üîÑ\x20Wrapping\x20','812ZPKbdm','‚úîÔ∏è\x20\x20','FIXED_GAS_PRICE','846joZAKk','encodeFunctionData','toString','‚ùå\x20Approving\x20token\x20failed','MaxUint256','12894SngOwx','‚úîÔ∏è\x20\x20Wrapping\x20','checkAllowance','coreInstance','14fAGDvs','2098380mAAmFS','interface','formatUnits','\x20CTC\x20into\x20WCTC','Failed\x20to\x20wrap\x20CTC','handleError','\x20failed','withdraw','\x20Into\x20','swapCount','waitForTransactionConfirmation','deposit','retryTransaction','\x20success','234670dPMLvg','approveToken','WCTC','26AabjQu','allowance','599982mYJqRH','56921Nreypp','üîÑ\x20Unwrapping\x20','\x20CTC\x20to\x20WCTC\x20success','constant','wrap','Transaction\x20failed\x20to\x20send.','13616nwkJzW','handleTransaction','Contract','provider','contracts','symbol','hash'];a0_0x743f=function(){return _0x4db2f5;};return a0_0x743f();}const a0_0x33dafc=a0_0x58d8;(function(_0x23f20e,_0xa9908c){const _0x31c71d=a0_0x58d8,_0x48119e=_0x23f20e();while(!![]){try{const _0x35d554=parseInt(_0x31c71d(0x1c3))/0x1*(-parseInt(_0x31c71d(0x1ae))/0x2)+parseInt(_0x31c71d(0x1c2))/0x3+parseInt(_0x31c71d(0x1a2))/0x4*(parseInt(_0x31c71d(0x19d))/0x5)+-parseInt(_0x31c71d(0x1aa))/0x6*(parseInt(_0x31c71d(0x1d7))/0x7)+-parseInt(_0x31c71d(0x1c9))/0x8*(parseInt(_0x31c71d(0x1a5))/0x9)+-parseInt(_0x31c71d(0x1bd))/0xa*(-parseInt(_0x31c71d(0x1d8))/0xb)+-parseInt(_0x31c71d(0x1af))/0xc*(-parseInt(_0x31c71d(0x1c0))/0xd);if(_0x35d554===_0xa9908c)break;else _0x48119e['push'](_0x48119e['shift']());}catch(_0x425124){_0x48119e['push'](_0x48119e['shift']());}}}(a0_0x743f,0x331c0));import{ethers}from'ethers';import a0_0x167c22 from'../../utils/twister.js';import{ERC20_ABI}from'../../abi/abi.js';import a0_0x47c75b from'../../../setup.js';export default class TokenManager{constructor(_0x51cebc,_0x2e4292){const _0x30f1f1=a0_0x58d8;this[_0x30f1f1(0x1ad)]=_0x51cebc,this['serviceManager']=_0x2e4292;}async[a0_0x33dafc(0x1ac)](_0x1e52d8,_0x1d8ced,_0x373fa8){const _0x3f2f2a=a0_0x33dafc,_0x568214=new ethers[(_0x3f2f2a(0x1cb))](_0x1e52d8,ERC20_ABI,this[_0x3f2f2a(0x1ad)][_0x3f2f2a(0x1d0)]);return await _0x568214[_0x3f2f2a(0x1c1)](_0x373fa8,_0x1d8ced);}async[a0_0x33dafc(0x1be)](_0xa4d9a3,_0x25b935){const _0xf7d4e8=a0_0x33dafc;try{const _0x25eba5=new ethers['Contract'](_0xa4d9a3,ERC20_ABI,this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1d0)]),_0x54dac1=await _0x25eba5[_0xf7d4e8(0x1ce)](),_0x3e1165='Approving\x20'+_0x54dac1+_0xf7d4e8(0x1b7)+_0x25b935,_0x34f3bd=_0x25eba5[_0xf7d4e8(0x1b0)][_0xf7d4e8(0x1a6)]('approve',[_0x25b935,ethers[_0xf7d4e8(0x1a9)][_0xf7d4e8(0x1a7)]()]),_0x2093c3={'to':_0xa4d9a3,'from':this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1da)],'value':0x0,'data':_0x34f3bd,'gasLimit':this[_0xf7d4e8(0x1ad)]['FIXED_GAS_LIMIT'],'gasPrice':this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1a4)],'nonce':await this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1cc)][_0xf7d4e8(0x1d6)](this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1da)])};try{const _0x360c8=await this[_0xf7d4e8(0x1d1)][_0xf7d4e8(0x1bb)](async()=>{const _0x1fcc13=_0xf7d4e8;return await this[_0x1fcc13(0x1d1)][_0x1fcc13(0x1ca)](async()=>await this[_0x1fcc13(0x1ad)][_0x1fcc13(0x1d0)][_0x1fcc13(0x19e)](_0x2093c3),_0x3e1165);});if(!_0x360c8){this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1b4)](_0x3e1165,_0xf7d4e8(0x1c8)),this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1b8)]++;return;}const _0x45c0a4=_0x360c8[_0xf7d4e8(0x1cf)]||'N/A';await this[_0xf7d4e8(0x1d1)][_0xf7d4e8(0x1b9)](_0x45c0a4,_0x3e1165),a0_0x167c22[_0xf7d4e8(0x19c)](''+_0x3e1165,this[_0xf7d4e8(0x1ad)]['accounts'],this['coreInstance'],_0xf7d4e8(0x1a3)+_0x3e1165+_0xf7d4e8(0x1bc));}catch(_0x318b7d){console[_0xf7d4e8(0x1d2)](_0x318b7d),this['coreInstance'][_0xf7d4e8(0x1b4)]('‚ùå\x20'+_0x3e1165+_0xf7d4e8(0x1b5),_0x318b7d[_0xf7d4e8(0x1d4)]);}}catch(_0x1b71fc){console[_0xf7d4e8(0x1d2)](_0x1b71fc),this[_0xf7d4e8(0x1ad)][_0xf7d4e8(0x1b4)](_0xf7d4e8(0x1a8),_0x1b71fc[_0xf7d4e8(0x1d4)]);}}async['wrap'](_0x4365a3,_0x53d543=![]){const _0x45a0e0=a0_0x33dafc;try{const _0x4b8401=_0x53d543===_0x45a0e0(0x1c7),_0x513f75=_0x4b8401?_0x45a0e0(0x1ba):_0x45a0e0(0x1b6),_0x3bb1f9=this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1cd)][_0x45a0e0(0x1bf)][_0x45a0e0(0x1b0)]['encodeFunctionData'](_0x513f75,_0x4b8401?[]:[_0x4365a3['toString']()]),_0x26c6d8={'to':a0_0x47c75b[_0x45a0e0(0x1c6)][_0x45a0e0(0x1d5)],'from':this[_0x45a0e0(0x1ad)]['address'],'value':_0x4b8401?ethers[_0x45a0e0(0x19f)](_0x4365a3):0x0,'data':_0x3bb1f9,'gasLimit':this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1a0)],'gasPrice':this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1a4)],'nonce':await this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1cc)][_0x45a0e0(0x1d6)](this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1da)])},_0x5d4395=_0x4b8401?_0x45a0e0(0x1a1)+Number(_0x4365a3)[_0x45a0e0(0x1d3)](0x8)+_0x45a0e0(0x1b2):_0x45a0e0(0x1c4)+Number(ethers['formatUnits'](_0x4365a3,0x12))[_0x45a0e0(0x1d3)](0x8)+'\x20WCTC\x20into\x20CTC',_0xda4a55=await this[_0x45a0e0(0x1d1)][_0x45a0e0(0x1bb)](()=>this[_0x45a0e0(0x1d1)][_0x45a0e0(0x1ca)](()=>this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1d0)][_0x45a0e0(0x19e)](_0x26c6d8),_0x5d4395));if(!_0xda4a55){this[_0x45a0e0(0x1ad)][_0x45a0e0(0x1b4)](_0x5d4395,'‚ùå\x20Transaction\x20failed\x20to\x20send.');return;}await this[_0x45a0e0(0x1d1)][_0x45a0e0(0x1b9)](_0xda4a55['hash'],_0x5d4395),a0_0x167c22[_0x45a0e0(0x19c)](''+_0x5d4395,this[_0x45a0e0(0x1ad)]['accounts'],this[_0x45a0e0(0x1ad)],_0x4b8401?_0x45a0e0(0x1ab)+Number(_0x4365a3)[_0x45a0e0(0x1d3)](0x8)+_0x45a0e0(0x1c5):_0x45a0e0(0x1d9)+Number(ethers[_0x45a0e0(0x1b1)](_0x4365a3,0x12))[_0x45a0e0(0x1d3)](0x8)+'\x20WCTC\x20to\x20CTC\x20success');}catch(_0x1dbaa0){this['coreInstance']['handleError'](_0x45a0e0(0x1b3),''+_0x1dbaa0[_0x45a0e0(0x1d4)]);}}}