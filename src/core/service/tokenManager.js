const a0_0x4b55e2=a0_0x2aee;function a0_0x979d(){const _0x20dc4b=['walletInstance','3377hgkWIe','handleTransaction','hash','approve','FIXED_GAS_LIMIT','address','symbol','4476468bEWvSv','279pVVqju','\x20Into\x20','199jGSYkm','formatUnits','Failed\x20to\x20wrap\x20CTC','161ZvVVNl','toFixed','‚ùå\x20Transaction\x20failed\x20to\x20send.','N/A','approveToken','Transaction\x20failed\x20to\x20send.','‚úîÔ∏è\x20\x20Wrapping\x20','5xAksEj','checkAllowance','üîÑ\x20Unwrapping\x20','248290vVUTfB','233432YPnhNu','\x20failed','accounts','Contract','log','FIXED_GAS_PRICE','2927520KMxwbE','üîÑ\x20Wrapping\x20','\x20CTC\x20to\x20WCTC\x20success','swapCount','WCTC','handleError','‚úîÔ∏è\x20\x20','coreInstance','wrap','toString','getTransactionCount','provider','encodeFunctionData','interface','1754QiqSpN','error','\x20WCTC\x20into\x20CTC','sendTransaction','serviceManager','\x20WCTC\x20to\x20CTC\x20success','52620zhhArr','Approving\x20','MaxUint256','message','waitForTransactionConfirmation','parseEther','retryTransaction','1646913vrcWcn','WCTC_ADDRESS'];a0_0x979d=function(){return _0x20dc4b;};return a0_0x979d();}(function(_0x1d9f45,_0x49a380){const _0x565eca=a0_0x2aee,_0x2b14a0=_0x1d9f45();while(!![]){try{const _0x23db0b=-parseInt(_0x565eca(0x16c))/0x1*(-parseInt(_0x565eca(0x152))/0x2)+parseInt(_0x565eca(0x15f))/0x3+-parseInt(_0x565eca(0x169))/0x4*(parseInt(_0x565eca(0x13a))/0x5)+-parseInt(_0x565eca(0x144))/0x6+parseInt(_0x565eca(0x16f))/0x7*(-parseInt(_0x565eca(0x13e))/0x8)+-parseInt(_0x565eca(0x16a))/0x9*(-parseInt(_0x565eca(0x13d))/0xa)+-parseInt(_0x565eca(0x162))/0xb*(-parseInt(_0x565eca(0x158))/0xc);if(_0x23db0b===_0x49a380)break;else _0x2b14a0['push'](_0x2b14a0['shift']());}catch(_0x5bcb53){_0x2b14a0['push'](_0x2b14a0['shift']());}}}(a0_0x979d,0x89052));import{ethers}from'ethers';function a0_0x2aee(_0x2bf118,_0x39786f){const _0x979d4c=a0_0x979d();return a0_0x2aee=function(_0x2aee44,_0xd38534){_0x2aee44=_0x2aee44-0x137;let _0xbd6500=_0x979d4c[_0x2aee44];return _0xbd6500;},a0_0x2aee(_0x2bf118,_0x39786f);}import a0_0xf9b25 from'../../utils/twister.js';import{ERC20_ABI}from'../../abi/abi.js';import a0_0x485421 from'../../../setup.js';export default class TokenManager{constructor(_0x2986a7,_0x4c842d){const _0x49e112=a0_0x2aee;this[_0x49e112(0x14b)]=_0x2986a7,this['serviceManager']=_0x4c842d;}async[a0_0x4b55e2(0x13b)](_0x4d514d,_0x4ab6d1,_0xa04823){const _0xd5107d=a0_0x4b55e2,_0x787a73=new ethers[(_0xd5107d(0x141))](_0x4d514d,ERC20_ABI,this[_0xd5107d(0x14b)][_0xd5107d(0x161)]);return await _0x787a73['allowance'](_0xa04823,_0x4ab6d1);}async[a0_0x4b55e2(0x137)](_0x52199a,_0xe3dce6){const _0x27da74=a0_0x4b55e2;try{const _0x1a1897=new ethers[(_0x27da74(0x141))](_0x52199a,ERC20_ABI,this['coreInstance'][_0x27da74(0x161)]),_0x5debc7=await _0x1a1897[_0x27da74(0x168)](),_0x1635a6=_0x27da74(0x159)+_0x5debc7+_0x27da74(0x16b)+_0xe3dce6,_0x286809=_0x1a1897[_0x27da74(0x151)][_0x27da74(0x150)](_0x27da74(0x165),[_0xe3dce6,ethers[_0x27da74(0x15a)][_0x27da74(0x14d)]()]),_0x3f3ee2={'to':_0x52199a,'from':this['coreInstance'][_0x27da74(0x167)],'value':0x0,'data':_0x286809,'gasLimit':this['coreInstance'][_0x27da74(0x166)],'gasPrice':this[_0x27da74(0x14b)]['FIXED_GAS_PRICE'],'nonce':await this[_0x27da74(0x14b)][_0x27da74(0x14f)][_0x27da74(0x14e)](this[_0x27da74(0x14b)][_0x27da74(0x167)])};try{const _0x50900c=await this[_0x27da74(0x156)]['retryTransaction'](async()=>{const _0x38c284=_0x27da74;return await this['serviceManager'][_0x38c284(0x163)](async()=>await this[_0x38c284(0x14b)][_0x38c284(0x161)][_0x38c284(0x155)](_0x3f3ee2),_0x1635a6);});if(!_0x50900c){this[_0x27da74(0x14b)][_0x27da74(0x149)](_0x1635a6,_0x27da74(0x138)),this[_0x27da74(0x14b)][_0x27da74(0x147)]++;return;}const _0x27d301=_0x50900c[_0x27da74(0x164)]||_0x27da74(0x172);await this['serviceManager'][_0x27da74(0x15c)](_0x27d301,_0x1635a6),a0_0xf9b25[_0x27da74(0x142)](''+_0x1635a6,this[_0x27da74(0x14b)]['accounts'],this[_0x27da74(0x14b)],_0x27da74(0x14a)+_0x1635a6+'\x20success');}catch(_0x1e76f4){console['error'](_0x1e76f4),this[_0x27da74(0x14b)][_0x27da74(0x149)]('‚ùå\x20'+_0x1635a6+_0x27da74(0x13f),_0x1e76f4[_0x27da74(0x15b)]);}}catch(_0x45c0c5){console[_0x27da74(0x153)](_0x45c0c5),this[_0x27da74(0x14b)]['handleError']('‚ùå\x20Approving\x20token\x20failed',_0x45c0c5[_0x27da74(0x15b)]);}}async[a0_0x4b55e2(0x14c)](_0x4d6843,_0x1dd52c=![]){const _0x2d511f=a0_0x4b55e2;try{const _0x47c124=_0x1dd52c===_0x2d511f(0x14c),_0x308232=_0x47c124?'deposit':'withdraw',_0x15685b=this[_0x2d511f(0x14b)]['contracts'][_0x2d511f(0x148)]['interface'][_0x2d511f(0x150)](_0x308232,_0x47c124?[]:[_0x4d6843[_0x2d511f(0x14d)]()]),_0x21f919={'to':a0_0x485421['constant'][_0x2d511f(0x160)],'from':this['coreInstance'][_0x2d511f(0x167)],'value':_0x47c124?ethers[_0x2d511f(0x15d)](_0x4d6843):0x0,'data':_0x15685b,'gasLimit':this[_0x2d511f(0x14b)][_0x2d511f(0x166)],'gasPrice':this[_0x2d511f(0x14b)][_0x2d511f(0x143)],'nonce':await this['coreInstance'][_0x2d511f(0x14f)][_0x2d511f(0x14e)](this[_0x2d511f(0x14b)]['address'])},_0x4cc998=_0x47c124?_0x2d511f(0x145)+Number(_0x4d6843)[_0x2d511f(0x170)](0x8)+'\x20CTC\x20into\x20WCTC':_0x2d511f(0x13c)+Number(ethers[_0x2d511f(0x16d)](_0x4d6843,0x12))[_0x2d511f(0x170)](0x8)+_0x2d511f(0x154),_0x312411=await this['serviceManager'][_0x2d511f(0x15e)](()=>this['serviceManager'][_0x2d511f(0x163)](()=>this[_0x2d511f(0x14b)]['walletInstance']['sendTransaction'](_0x21f919),_0x4cc998));if(!_0x312411){this[_0x2d511f(0x14b)][_0x2d511f(0x149)](_0x4cc998,_0x2d511f(0x171));return;}await this[_0x2d511f(0x156)][_0x2d511f(0x15c)](_0x312411['hash'],_0x4cc998),a0_0xf9b25[_0x2d511f(0x142)](''+_0x4cc998,this[_0x2d511f(0x14b)][_0x2d511f(0x140)],this[_0x2d511f(0x14b)],_0x47c124?_0x2d511f(0x139)+Number(_0x4d6843)[_0x2d511f(0x170)](0x8)+_0x2d511f(0x146):'‚úîÔ∏è\x20\x20Unwrapping\x20'+Number(ethers[_0x2d511f(0x16d)](_0x4d6843,0x12))['toFixed'](0x8)+_0x2d511f(0x157));}catch(_0x364d7f){this[_0x2d511f(0x14b)]['handleError'](_0x2d511f(0x16e),''+_0x364d7f['message']);}}}