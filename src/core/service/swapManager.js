const a0_0x2a1381=a0_0x2b20;function a0_0x2b20(_0x5764fa,_0xf7400f){const _0x4147bb=a0_0x4147();return a0_0x2b20=function(_0x2b2097,_0x1163e9){_0x2b2097=_0x2b2097-0x1cf;let _0x145364=_0x4147bb[_0x2b2097];return _0x145364;},a0_0x2b20(_0x5764fa,_0xf7400f);}(function(_0x4135c5,_0x3c7534){const _0x243c6d=a0_0x2b20,_0x8d848c=_0x4135c5();while(!![]){try{const _0x479dc9=-parseInt(_0x243c6d(0x1f1))/0x1+parseInt(_0x243c6d(0x1f2))/0x2*(-parseInt(_0x243c6d(0x1fa))/0x3)+-parseInt(_0x243c6d(0x1d5))/0x4+-parseInt(_0x243c6d(0x1da))/0x5+parseInt(_0x243c6d(0x1d2))/0x6+parseInt(_0x243c6d(0x1e8))/0x7+parseInt(_0x243c6d(0x1d1))/0x8;if(_0x479dc9===_0x3c7534)break;else _0x8d848c['push'](_0x8d848c['shift']());}catch(_0x346206){_0x8d848c['push'](_0x8d848c['shift']());}}}(a0_0x4147,0xe618e));import{ethers}from'ethers';import{ERC20_ABI}from'../../abi/abi.js';import a0_0x1b0073 from'../../utils/twister.js';export default class SwapManager{constructor(_0xae6bb0,_0x5ca5ad){const _0x1b6b4e=a0_0x2b20;this[_0x1b6b4e(0x1f3)]=_0xae6bb0,this[_0x1b6b4e(0x1f9)]=_0x5ca5ad;}async[a0_0x2a1381(0x1d3)](_0x2145b6,_0x181fe2,_0x5974f4,_0x5cc883,_0x9374ef=![]){const _0x117976=a0_0x2a1381;try{const _0x13132f=new ethers[(_0x117976(0x1f6))](_0x2145b6,ERC20_ABI,this['coreInstance'][_0x117976(0x1d0)]),[_0x22dce7,_0x43868b]=await Promise['all']([this[_0x117976(0x1f3)][_0x117976(0x1ef)](_0x2145b6),this[_0x117976(0x1f3)]['fetchTokenDetails'](_0x181fe2)]);let _0x313aa2=_0x5974f4;_0x9374ef&&(_0x313aa2=await _0x13132f[_0x117976(0x1e9)](this[_0x117976(0x1f3)][_0x117976(0x1de)]),await this[_0x117976(0x1f3)][_0x117976(0x1dd)](_0x2145b6,this[_0x117976(0x1f3)][_0x117976(0x1e6)][_0x117976(0x1e4)]));const _0x261f5f=[_0x2145b6,_0x181fe2,_0x5cc883,this[_0x117976(0x1f3)][_0x117976(0x1de)],Math[_0x117976(0x1ea)](Date[_0x117976(0x1dc)]()/0x3e8)+0x708,_0x9374ef?_0x313aa2[_0x117976(0x1d4)]():ethers['parseEther'](_0x313aa2[_0x117976(0x1d4)]()),0x0,0x0],_0x5153f4=this[_0x117976(0x1f3)][_0x117976(0x1e3)][_0x117976(0x1f0)][_0x117976(0x1e2)]['encodeFunctionData']('exactInputSingle',[_0x261f5f]),_0x422454=_0x9374ef?Number(Number(_0x313aa2['toString']())/Number(0xa**_0x22dce7['decimal'][_0x117976(0x1d4)]()))['toFixed'](0x8):Number(_0x313aa2)[_0x117976(0x1f7)](0x8),_0xe966e0={'to':this[_0x117976(0x1f3)][_0x117976(0x1e6)][_0x117976(0x1e4)],'from':this[_0x117976(0x1f3)][_0x117976(0x1de)],'value':_0x9374ef?0x0:ethers[_0x117976(0x1e1)](_0x313aa2[_0x117976(0x1d4)]()),'data':_0x5153f4,'gasLimit':this[_0x117976(0x1f3)][_0x117976(0x1ee)],'gasPrice':this['coreInstance'][_0x117976(0x1ed)],'nonce':await this[_0x117976(0x1f3)]['provider'][_0x117976(0x1d8)](this[_0x117976(0x1f3)][_0x117976(0x1de)])},_0x2641e9=_0x117976(0x1df)+_0x422454+'\x20'+_0x22dce7[_0x117976(0x1f4)]+_0x117976(0x1f8)+_0x43868b[_0x117976(0x1f4)],_0xfccfe9=await this[_0x117976(0x1f9)][_0x117976(0x1db)](async()=>{const _0x5118f9=_0x117976;return await this[_0x5118f9(0x1f9)][_0x5118f9(0x1cf)](async()=>await this[_0x5118f9(0x1f3)][_0x5118f9(0x1d0)][_0x5118f9(0x1ec)](_0xe966e0),_0x2641e9);});if(!_0xfccfe9){this[_0x117976(0x1f3)][_0x117976(0x1e0)](_0x2641e9,_0x117976(0x1f5));return;}const _0x1cca55=_0xfccfe9['hash']||_0x117976(0x1d6);await this[_0x117976(0x1f9)][_0x117976(0x1d9)](_0x1cca55,_0x2641e9),a0_0x1b0073[_0x117976(0x1e7)](''+_0x2641e9,this['coreInstance']['accounts'],this[_0x117976(0x1f3)],_0x117976(0x1d7)+_0x422454+'\x20'+_0x22dce7[_0x117976(0x1f4)]+'\x20for\x20'+_0x43868b[_0x117976(0x1f4)]+_0x117976(0x1eb));}catch(_0x467b0d){return console[_0x117976(0x1e5)](_0x467b0d),await this[_0x117976(0x1f3)]['handleError']('Failed\x20to\x20swap\x20tokens',_0x467b0d[_0x117976(0x1fb)]),null;}}}function a0_0x4147(){const _0x4f0917=['log','6425132PblmBC','balanceOf','floor','\x20was\x20successful!','sendTransaction','FIXED_GAS_PRICE','FIXED_GAS_LIMIT','fetchTokenDetails','ROUTER','1622219lRjqSv','7286dqgnWZ','coreInstance','symbol','Transaction\x20failed\x20to\x20send.','Contract','toFixed','\x20to\x20','serviceInstance','1479jSaErS','message','handleTransaction','walletInstance','34341968sgtirE','3764892CcCsJd','swapToken','toString','2301732djcEtg','N/A','‚úîÔ∏è\x20\x20Swapping\x20','getTransactionCount','waitForTransactionConfirmation','4509875jVRPCf','retryTransaction','now','processApprove','address','üîÑ\x20Swapping\x20','handleError','parseEther','interface','contracts','ROUTER_ADDRESS','error','CONTRACT_ADDRESS'];a0_0x4147=function(){return _0x4f0917;};return a0_0x4147();}